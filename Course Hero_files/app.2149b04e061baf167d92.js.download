!function(e){function t(t){for(var a,l,s=t[0],i=t[1],c=t[2],d=0,m=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&m.push(r[l][0]),r[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={0:0},o=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/assets/js/compiled/";var s=window.webpackJsonppqa_authoring=window.webpackJsonppqa_authoring||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=i;o.push([389,1]),n()}({0:function(e,t){e.exports=window.React},101:function(e,t,n){e.exports={"action-bar-secondary-button":"action-bar-secondary-button-2Vgp1",actionBarSecondaryButton:"action-bar-secondary-button-2Vgp1","amazon-button":"amazon-button-3ChC_",amazonButton:"amazon-button-3ChC_"}},116:function(e,t,n){e.exports={"pqa-auth-id-input":"pqa-auth-id-input",pqaAuthIdInput:"pqa-auth-id-input","pqa-auth-isCorrect-form":"pqa-auth-isCorrect-form",pqaAuthIsCorrectForm:"pqa-auth-isCorrect-form"}},126:function(e,t,n){e.exports={"image-fullscreen-show":"image-fullscreen-show-2bYir",imageFullscreenShow:"image-fullscreen-show-2bYir","close-btn":"close-btn-1qd4z",closeBtn:"close-btn-1qd4z"}},135:function(e,t,n){e.exports={"pqa-author-actions":"pqa-author-actions",pqaAuthorActions:"pqa-author-actions",btn:"btn","btn-icon":"btn-icon",btnIcon:"btn-icon","chi-help-circle-filled":"chi-help-circle-filled",chiHelpCircleFilled:"chi-help-circle-filled",container:"container","pqa-modal":"pqa-modal",pqaModal:"pqa-modal","modal-dialog":"modal-dialog",modalDialog:"modal-dialog"}},136:function(e,t,n){e.exports={"cheditor-container":"cheditor-container",cheditorContainer:"cheditor-container",ck:"ck","ck-balloon-panel":"ck-balloon-panel",ckBalloonPanel:"ck-balloon-panel","ck-editor__editable_inline":"ck-editor__editable_inline",ckEditorEditableInline:"ck-editor__editable_inline","ck-content":"ck-content",ckContent:"ck-content","ck-mathpreview-popup":"ck-mathpreview-popup",ckMathpreviewPopup:"ck-mathpreview-popup",katex:"katex","pqa-explanation-type-toggle-btn":"pqa-explanation-type-toggle-btn",pqaExplanationTypeToggleBtn:"pqa-explanation-type-toggle-btn","pqa-toggle":"pqa-toggle",pqaToggle:"pqa-toggle","pqa-explanation-step-toggle-btn":"pqa-explanation-step-toggle-btn",pqaExplanationStepToggleBtn:"pqa-explanation-step-toggle-btn","pqa-step-heading":"pqa-step-heading",pqaStepHeading:"pqa-step-heading","ck-labeled-input":"ck-labeled-input",ckLabeledInput:"ck-labeled-input","ck-label":"ck-label",ckLabel:"ck-label"}},150:function(e,t,n){e.exports={"widget-display-container":"widget-display-container",widgetDisplayContainer:"widget-display-container","widget-display":"widget-display",widgetDisplay:"widget-display"}},173:function(e,t,n){e.exports={blackText:"blackText","form-control":"form-control",formControl:"form-control",graphCodeEditor:"graphCodeEditor","graph-widget-editor-prompt":"graph-widget-editor-prompt",graphWidgetEditorPrompt:"graph-widget-editor-prompt","prompt-icon":"prompt-icon",promptIcon:"prompt-icon"}},174:function(e,t,n){e.exports={"widget-preview-container":"widget-preview-container",widgetPreviewContainer:"widget-preview-container","widget-edit-overlay-btn":"widget-edit-overlay-btn",widgetEditOverlayBtn:"widget-edit-overlay-btn"}},180:function(e,t,n){e.exports={"pqa-auth-answers-table":"pqa-auth-answers-table",pqaAuthAnswersTable:"pqa-auth-answers-table","pqa-auth-table-header":"pqa-auth-table-header",pqaAuthTableHeader:"pqa-auth-table-header","pqa-auth-answer-order-col":"pqa-auth-answer-order-col",pqaAuthAnswerOrderCol:"pqa-auth-answer-order-col","pqa-auth-id-col":"pqa-auth-id-col",pqaAuthIdCol:"pqa-auth-id-col","pqa-auth-isCorrect-col":"pqa-auth-isCorrect-col",pqaAuthIsCorrectCol:"pqa-auth-isCorrect-col","pqa-auth-remove-col":"pqa-auth-remove-col",pqaAuthRemoveCol:"pqa-auth-remove-col"}},191:function(e,t,n){e.exports={modalBtn:"modalBtn",panel:"panel","panel-success":"panel-success",panelSuccess:"panel-success","panel-danger":"panel-danger",panelDanger:"panel-danger"}},198:function(e,t,n){e.exports={"user-intent-modal":"user-intent-modal-2HTBu",userIntentModal:"user-intent-modal-2HTBu"}},214:function(e,t,n){e.exports={"btn-icon":"btn-icon",btnIcon:"btn-icon"}},215:function(e,t,n){e.exports={"pqa-auth-hints-label":"pqa-auth-hints-label",pqaAuthHintsLabel:"pqa-auth-hints-label","pqa-auth-hints-remove":"pqa-auth-hints-remove",pqaAuthHintsRemove:"pqa-auth-hints-remove"}},237:function(e,t,n){e.exports={"ck-mathpreview-popup":"ck-mathpreview-popup",ckMathpreviewPopup:"ck-mathpreview-popup",katex:"katex","katex-html":"katex-html",katexHtml:"katex-html"}},238:function(e,t,n){e.exports={"widget-item":"widget-item",widgetItem:"widget-item","widget-list-single":"widget-list-single",widgetListSingle:"widget-list-single","widget-item-type-text":"widget-item-type-text",widgetItemTypeText:"widget-item-type-text","widget-remove-btn":"widget-remove-btn",widgetRemoveBtn:"widget-remove-btn","widget-item-type-code":"widget-item-type-code",widgetItemTypeCode:"widget-item-type-code","modal-open":"modal-open",modalOpen:"modal-open","modal-dialog":"modal-dialog",modalDialog:"modal-dialog"}},239:function(e,t,n){e.exports={"widget-dropdown-container":"widget-dropdown-container",widgetDropdownContainer:"widget-dropdown-container","is-empty":"is-empty",isEmpty:"is-empty","widget-dropdown-item":"widget-dropdown-item",widgetDropdownItem:"widget-dropdown-item","widget-add-btn":"widget-add-btn",widgetAddBtn:"widget-add-btn","widget-add-dropdown":"widget-add-dropdown",widgetAddDropdown:"widget-add-dropdown","dropdown-menu":"dropdown-menu",dropdownMenu:"dropdown-menu"}},24:function(e,t,n){e.exports={"col-draggable":"col-draggable-3zage",colDraggable:"col-draggable-3zage","col-identifier":"col-identifier-20Fm0",colIdentifier:"col-identifier-20Fm0","col-is-correct":"col-is-correct-25_ou",colIsCorrect:"col-is-correct-25_ou","col-remove":"col-remove-yGTCH",colRemove:"col-remove-yGTCH","choices-table":"choices-table-1q6X1",choicesTable:"choices-table-1q6X1"}},25:function(e,t){e.exports=window.ReactDOM},328:function(e,t){e.exports=window.katex},329:function(e,t,n){e.exports={"is-invalid":"is-invalid",isInvalid:"is-invalid"}},341:function(e,t,n){e.exports={"widget-item-type-code":"widget-item-type-code",widgetItemTypeCode:"widget-item-type-code"}},342:function(e,t,n){e.exports={"step-column":"step-column",stepColumn:"step-column"}},343:function(e,t,n){e.exports={"step-explanation-required-container":"step-explanation-required-container",stepExplanationRequiredContainer:"step-explanation-required-container"}},344:function(e,t,n){e.exports={checkbox:"checkbox"}},345:function(e,t,n){e.exports={"scoring-container":"scoring-container",scoringContainer:"scoring-container","space-between":"space-between",spaceBetween:"space-between","fixed-space":"fixed-space",fixedSpace:"fixed-space","selection-box-heading":"selection-box-heading",selectionBoxHeading:"selection-box-heading",h5:"h5","selection-box":"selection-box",selectionBox:"selection-box",btn:"btn",selected:"selected","border-right":"border-right",borderRight:"border-right"}},346:function(e,t,n){e.exports={"tooltip-content":"tooltip-content",tooltipContent:"tooltip-content",tooltip:"tooltip","tooltip-bottom":"tooltip-bottom",tooltipBottom:"tooltip-bottom","tooltip-inner":"tooltip-inner",tooltipInner:"tooltip-inner"}},347:function(e,t,n){e.exports={"review-section":"review-section",reviewSection:"review-section","scoring-content":"scoring-content",scoringContent:"scoring-content","scoring-header":"scoring-header",scoringHeader:"scoring-header","scoring-controls":"scoring-controls",scoringControls:"scoring-controls","scoring-action-buttons":"scoring-action-buttons",scoringActionButtons:"scoring-action-buttons"}},382:function(e,t,n){e.exports={"is-correct-toggle":"is-correct-toggle",isCorrectToggle:"is-correct-toggle",active:"active",btn:"btn"}},383:function(e,t,n){e.exports={"tcq-answer-id-container":"tcq-answer-id-container",tcqAnswerIdContainer:"tcq-answer-id-container","form-group":"form-group",formGroup:"form-group"}},384:function(e,t,n){e.exports={removeIcon:"removeIcon",imageContainer:"imageContainer"}},385:function(e,t,n){e.exports={"pills-content-container":"pills-content-container",pillsContentContainer:"pills-content-container",pills:"pills",pill:"pill","pill-content":"pill-content",pillContent:"pill-content","pill-delete-button":"pill-delete-button",pillDeleteButton:"pill-delete-button","input-dropdown-container":"input-dropdown-container",inputDropdownContainer:"input-dropdown-container","pills-input":"pills-input",pillsInput:"pills-input","menu-dropdown":"menu-dropdown",menuDropdown:"menu-dropdown","menu-dropdown-item":"menu-dropdown-item",menuDropdownItem:"menu-dropdown-item",selected:"selected"}},386:function(e,t,n){e.exports={"pqa-settings-menu-dropdown-container":"pqa-settings-menu-dropdown-container",pqaSettingsMenuDropdownContainer:"pqa-settings-menu-dropdown-container","pqa-settings-menu-dropdown":"pqa-settings-menu-dropdown",pqaSettingsMenuDropdown:"pqa-settings-menu-dropdown"}},388:function(e,t,n){e.exports={"pqa-solution-type-select":"pqa-solution-type-select",pqaSolutionTypeSelect:"pqa-solution-type-select"}},389:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"PATH_SOLUTION",(function(){return D})),n.d(a,"GENERAL_COMMENTS",(function(){return L})),n.d(a,"PATH_HINTS",(function(){return q})),n.d(a,"PATH_EXPLANATIONS",(function(){return $})),n.d(a,"PATH_ANSWER",(function(){return M})),n.d(a,"PLACEHOLDER_DEFAULT_COMMENTS",(function(){return U})),n.d(a,"PLACEHOLDER_DEFAULT_HINTS",(function(){return F})),n.d(a,"PLACEHOLDER_DEFAULT_ANSWER",(function(){return G})),n.d(a,"PLACEHOLDER_DEFAULT_EXPLANATION",(function(){return j})),n.d(a,"PLACEHOLDER_ES",(function(){return H})),n.d(a,"PLACEHOLDER_STEP_BY_STEP_SECOND_COLUMN",(function(){return V})),n.d(a,"PLACEHOLDER_CL",(function(){return Q})),n.d(a,"QUESTION_CODE_LENGTH",(function(){return W})),n.d(a,"TEXT_EXPLANATION_TYPE",(function(){return X})),n.d(a,"STEP_EXPLANATION_TYPE",(function(){return B})),n.d(a,"COMPONENTS_WITH_HINTS",(function(){return J})),n.d(a,"CK_COMMENT_LICENSE",(function(){return K})),n.d(a,"LANG_JAVA",(function(){return Y})),n.d(a,"LANG_CPP",(function(){return z})),n.d(a,"LANG_PYTHON",(function(){return Z})),n.d(a,"QUESTION_ELEMENT_OPTION_TYPE",(function(){return ee})),n.d(a,"TEXTBOOK_URL_MARKER",(function(){return te})),n.d(a,"QC_FAIL_FIX_NEEDED",(function(){return ne})),n.d(a,"QC_FAIL_FIX_NOT_NEEDED",(function(){return ae})),n.d(a,"QC_PASS",(function(){return re})),n.d(a,"QC_DEFAULT",(function(){return oe}));var r={};n.r(r),n.d(r,"GTMDataLayer",(function(){return Bt})),n.d(r,"tracker",(function(){return Jt})),n.d(r,"ActionType",(function(){return Wt})),n.d(r,"ContainerType",(function(){return Xt})),n.d(r,"trackEvent",(function(){return Yt})),n.d(r,"setUserProperties",(function(){return zt})),n.d(r,"getPageProperties",(function(){return Zt})),n.d(r,"trackDefaultPageViewed",(function(){return en})),n.d(r,"trackLandingDocSeen",(function(){return tn})),n.d(r,"trackCtaClicked",(function(){return nn})),n.d(r,"trackElementFocused",(function(){return an})),n.d(r,"trackContentViewedWithinAPage",(function(){return rn})),n.d(r,"trackCustomEvent",(function(){return on})),n.d(r,"mergePageProperties",(function(){return ln})),n.d(r,"trackSearchResultSelected",(function(){return sn})),n.d(r,"getUserState",(function(){return cn}));var o={};n.r(o),n.d(o,"handleDragEnd",(function(){return na}));var l={};n.r(l),n.d(l,"PATH_SOLUTION",(function(){return aa})),n.d(l,"QUESTION_CODE_LENGTH",(function(){return ra})),n.d(l,"TEXT_EXPLANATION_TYPE",(function(){return oa})),n.d(l,"STEP_EXPLANATION_TYPE",(function(){return la})),n.d(l,"COMPONENTS_WITH_HINTS",(function(){return sa}));var s={};n.r(s),n.d(s,"ERROR_DESC",(function(){return Ja})),n.d(s,"API_REVIEW",(function(){return va})),n.d(s,"API_GET_PUBLISHED",(function(){return wa})),n.d(s,"API_UPDATE_PUBLISHED",(function(){return Ca})),n.d(s,"CORRECTNESS_VALUE_0_SELECTED",(function(){return Ua})),n.d(s,"CORRECTNESS_VALUE_1_SELECTED",(function(){return Fa})),n.d(s,"CORRECTNESS_KEY",(function(){return ya})),n.d(s,"LEARNING_KEY",(function(){return Na})),n.d(s,"STYLE_KEY",(function(){return Sa})),n.d(s,"GRAMMAR_KEY",(function(){return xa})),n.d(s,"CORRECTNESS_VALUE",(function(){return Ta})),n.d(s,"LEARNING_VALUE",(function(){return Oa})),n.d(s,"STYLE_VALUE",(function(){return Ia})),n.d(s,"GRAMMAR_VALUE",(function(){return Aa})),n.d(s,"PUBLISH_VALUE",(function(){return ka})),n.d(s,"COPYRIGHT_VALUE",(function(){return Ra})),n.d(s,"PUBLISH_KEY",(function(){return Pa})),n.d(s,"COPYRIGHT_KEY",(function(){return _a})),n.d(s,"PREV_COPYRIGHT_KEY",(function(){return Da})),n.d(s,"CHECKBOX_STATE_VALUE_KEY",(function(){return Xa})),n.d(s,"CHECKBOX_ACTION_TYPES",(function(){return Ba})),n.d(s,"UPDATE_SCORING_WITH_API_VALUES",(function(){return Ga})),n.d(s,"UPDATE_PUBLISHED",(function(){return ja})),n.d(s,"UPDATE_COPYRIGHT",(function(){return Ha})),n.d(s,"UPDATE_SCORING",(function(){return Va})),n.d(s,"UPDATE_QC_STATUS",(function(){return Qa})),n.d(s,"RESET",(function(){return Wa})),n.d(s,"YES",(function(){return $a})),n.d(s,"NO",(function(){return Ma})),n.d(s,"QC_KEY",(function(){return La})),n.d(s,"QC_VALUE",(function(){return qa}));var i={};n.r(i),n.d(i,"ERROR_DESC",(function(){return hr})),n.d(i,"SELECTION_GROUPS_WITH_TOOLTIPS",(function(){return ur})),n.d(i,"DOK_KEY",(function(){return lr})),n.d(i,"DIFFICULTY_KEY",(function(){return sr})),n.d(i,"DOK_VALUE",(function(){return ir})),n.d(i,"DIFFICULTY_VALUE",(function(){return cr})),n.d(i,"UPDATE_SCORING",(function(){return Er})),n.d(i,"RESET",(function(){return gr})),n.d(i,"EASY",(function(){return dr})),n.d(i,"MEDIUM",(function(){return mr})),n.d(i,"HARD",(function(){return pr}));var c=n(0),u=n(25);n(214);function d(e){const{onClick:t,clickData:n,color:a,disabled:r,paddingClass:o,size:l,centered:s,isIconOnly:i,additionalClasses:u}=e;let d=`btn btn-${a||"primary"}`;return d+=l?` btn-${l}`:"",d+=void 0!==o?` ${o}`:" px-8",d+=s?" d-block mx-auto":"",d+=i?" btn-icon":"",d+=u?` ${u}`:"",c.createElement("button",{type:"button",className:d,onClick:e=>{t(n||e)},disabled:r},e.children)}var m=e=>{const{onSave:t,onSaveAndCreateNew:n,onPreview:a}=e;return c.createElement("div",{className:"pqa-author-actions text-right"},c.createElement("div",{className:"d-flex justify-content-end"},c.createElement(d,{color:"secondary",size:"sm",paddingClass:"",additionalClasses:"ml-0",onClick:a},c.createElement("i",{className:"chi-view"})),c.createElement(d,{color:"secondary",size:"sm",paddingClass:"px-4",additionalClasses:"ml-2",onClick:t},"Submit"),c.createElement(d,{color:"secondary",size:"sm",paddingClass:"px-4",additionalClasses:"ml-2",onClick:n},"Submit & create new")))};var p=e=>{const{path:t,prevNextCodes:n,onChangeSourceId:a,onLoadSolution:r,urlQuestionCode:o,loadedSourceId:l}=e,[s,i]=Object(c.useState)("");return c.useEffect(()=>{o&&!s&&(i(o),r(o))},[o,s,r]),c.createElement("div",{className:"pqa-question-info pt-2"},c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-md-5"},c.createElement("label",{htmlFor:`${t}.questionId`},"Question code"),c.createElement("input",{className:"form-control",type:"text",placeholder:"Enter question code",value:s,onChange:e=>i(e.currentTarget.value),onBlur:e=>a(e.currentTarget.value),id:`${t}.questionId`,name:`${t}.questionId`,autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&r(s)}})),l&&c.createElement("div",{className:"col-md-7 mt-3"},c.createElement(d,{color:"secondary",size:"sm",paddingClass:"px-4",onClick:()=>r(s)},"Open solution"),void 0!==n[0]&&c.createElement("a",{href:`/premium-qa/authoring/${n[0]}/`,className:"btn btn-secondary btn-sm btn-icon d-inline-block px-2 py-1 ml-2"},c.createElement("i",{className:"chi-pointer-left-bold"}),c.createElement("span",{className:"sr-only"},"Previous Question")),void 0!==n[1]&&c.createElement("a",{href:`/premium-qa/authoring/${n[1]}/`,className:`btn btn-secondary btn-sm btn-icon d-inline-block px-2 py-1 ${void 0!==n[0]?"ml-1":"ml-2"}`},c.createElement("i",{className:"chi-pointer-right-bold"}),c.createElement("span",{className:"sr-only"},"Next Question")))))},E=n(397),g=(n(215),n(4)),h=n(88),f=n(71);n(135);let b,v,w,C,y,N,S,x,T,O,I,A,k,R,P,_;!function(e){e.Textbook="tbq",e.User="uq",e.Document="dq"}(b||(b={})),function(e){e.ONE_PER_ANSWER="Each answer with its own explanation",e.MULTIPLE_PER_EXPLANATION="Multiple answers with one explanation"}(v||(v={})),function(e){e.EXERCISES="exercizes",e.SOLUTIONS="solutions",e.ANSWERS="answers",e.STEPS="steps",e.EXPLANATIONS="explanations",e.WIDGETS="widgets",e.HINTS="hints"}(w||(w={})),function(e){e.HAS_TEXT="hasText",e.HAS_WIDGETS="hasWidgets",e.HAS_HINTS="hasHints"}(C||(C={})),function(e){e.MCQ="mcq",e.TCQ="tcq",e.CALC="calc",e.ES="es",e.MS="ms",e.SA="sa",e.FIB="fib",e.DRW="drw",e.GR="gr",e.MAT="mat",e.ORD="ord",e.CL="cl",e.LDGR="ldgr",e.FF="ff"}(y||(y={})),function(e){e.mcq="Multiple Choice",e.ms="Multiple Select",e.tcq="Two Choice",e.calc="Calculation",e.gr="Graphing",e.ldgr="Ledger",e.cl="Classifying",e.mat="Matching",e.ord="Ordering",e.drw="Drawing",e.es="Essay",e.fib="Fill-in-the-Blank",e.sa="Short Answer"}(N||(N={})),function(e){e.MCQ="mcq",e.MS="ms",e.TCQ="tcq"}(S||(S={})),function(e){e.CALC="calc",e.GR="gr",e.LDGR="ldgr"}(x||(x={})),function(e){e.CL="cl",e.MAT="mat",e.ORD="ord"}(T||(T={})),function(e){e.DRW="drw",e.ES="es",e.FIB="fib",e.SA="sa"}(O||(O={})),function(e){e.TEXT="text",e.STEP_BY_STEP="step_by_step"}(I||(I={})),function(e){e.ONE_COLUMN="one_column",e.TWO_COLUMN="two_column"}(A||(A={})),function(e){e.TEXT="text",e.GRAPH="graph",e.LEDGER="ledger",e.CODE="code"}(k||(k={})),function(e){e.SUCCESS="success",e.ERROR="error"}(R||(R={})),function(e){e[e.LOAD=0]="LOAD",e[e.UPDATE=1]="UPDATE",e[e.REMOVE=2]="REMOVE"}(P||(P={})),function(e){e.CAN_AUTHOR_SOLUTION="canAuthorSolution",e.CAN_POST_REVIEW="canPostReview",e.CAN_EDIT_QUESTION="canEditQuestion"}(_||(_={}));const D="solutions[0]",L=D+".generalComments",q=D+".hints",$="explanations",M=D+".answers",U="Enter comments.",F="Enter hint. Max of two sentences.",G="Enter answer",j="Enter explanation",H="Enter explanation. You can format it with a bulleted list and guidelines on how to construct the essay.",V="Add reference to the description. e.g. formulas, graphs, or other elements",Q="Enter answer option",W=6,X="text",B="step_by_step",J={[y.MCQ]:!0,[y.MS]:!0,[y.TCQ]:!0,[y.CALC]:!0,[y.ES]:!1,[y.SA]:!0,[y.FIB]:!0,[y.DRW]:!1,[y.GR]:!0,[y.MAT]:!0,[y.ORD]:!1,[y.CL]:!0,[y.FF]:!0,[y.LDGR]:!0},K={licenseKey:"8n2vDzX9/OpVm29rVhP+bMU2gq2HAAlPkW99qQ04AvE7C7IM9fhbaA36B0CzcHQ/"},Y={value:"java",text:"Java"},z={value:"c_cpp",text:"C++"},Z={value:"python",text:"Python"},ee="option",te="/textbook-solutions/",ne="qc_fail_fix_needed",ae="qc_fail_fix_not_needed",re="qc_pass",oe="qc_default_no_result";let le;!function(e){e.LOWERCASE="a, b, c, ...",e.UPPERCASE="A, B, C, ...",e.NUMERIC="1, 2, 3, ...",e.BOOLEAN="True, false",e.CUSTOM="Custom"}(le||(le={}));const se=97,ie=65;function ce(e){return String.fromCharCode(e)}function ue(e,t,n){if(e===le.NUMERIC)return(t+1).toString();if(e===le.LOWERCASE){return ce(t+se)}if(e===le.UPPERCASE){return ce(t+ie)}return n}function de(e,t){return t.map((t,n)=>({...t,answerIdentifier:ue(e,n,t.answerIdentifier)}))}function me(e,t,n){t.forEach((t,r)=>{let o=`${a.PATH_SOLUTION}.answers[${r}].answerIdentifier`;n.setValue(o,ue(e,r,t.answerIdentifier))})}function pe(e,t,n){n.setValue(`${a.PATH_SOLUTION}.idType`,e),me(e,t,n)}function Ee(e=y.MCQ){return Me(e,{sourceId:"",sourceType:"",solutionId:"",idType:null,type:y.MCQ,hints:[""],answers:[],commentThreads:[],validationErrors:[],externalLink:"",hasSameExplanationForAllAnswers:!1,isPublished:!1,copyright:!1,prevCopyright:!1,generalComments:"",isScorable:!0,containsArt:!1,dok:null,difficulty:null,version:0,qcStatus:"",userId:"",authoredDate:""})}function ge(e,t){return{type:e,widgets:[{type:k.TEXT,text:""}],explanations:t}}function he(e){return{widgets:[{type:k.TEXT,text:e||""}],type:X}}function fe(e,t){let n;const a=e.explanations[0];switch(t){case I.TEXT:n=a.type===I.STEP_BY_STEP?function(e){let t=he();return t.widgets=e.explanations.reduce((e,t)=>[...e,...t.explanations.reduce((e,t)=>[...e,...t.widgets],[])],[]),t.widgets=ye(t.widgets.filter(e=>!Ne(e))),{...e,explanations:[t]}}(e):{...e};break;case I.STEP_BY_STEP:n=a.type===I.TEXT?function(e){let t={...e,explanations:be()},n=ye(e.explanations[0].widgets.filter(e=>!Ne(e)));return t.explanations[0].explanations[0].widgets=[...n],t}(e):{...e}}return n}function be(){return[we(),we()]}function ve(e){return ge(e,be())}function we(){return{type:B,explanations:[he(),he()]}}function Ce(e){return e&&e.type===B}function ye(e){return 0===e.length?[Se()]:e}function Ne(e){return!e.text&&!e.source}function Se(){return{type:k.TEXT,text:""}}function xe(e){switch(e){case k.CODE:return{type:k.CODE,source:"",languageVersion:"",language:Y.value};case k.GRAPH:return{type:k.GRAPH,text:"",source:""};case k.LEDGER:return{type:k.LEDGER,text:"",source:""};default:return Se()}}function Te(){return{type:y.CL,explanations:[he()],groupName:"",options:[]}}function Oe(e,t){let n=[ge(y.FIB,[he()]),ge(y.FIB,[he()]),ge(y.FIB,[he()])],a=t==v.MULTIPLE_PER_EXPLANATION;return{...e,type:y.FIB,answers:n,hasSameExplanationForAllAnswers:a}}function Ie(){return{answerIdentifier:"",type:y.MAT,explanations:[he()]}}function Ae(){return{answerIdentifier:"",type:y.MCQ,explanations:[he()],isCorrect:!1}}const ke=e=>({...e,idType:le.LOWERCASE,type:y.MCQ,answers:de(le.LOWERCASE,[Ae(),Ae(),Ae(),Ae()]),hints:[""]});function Re(){return{answerIdentifier:"",type:y.MS,explanations:[he()],isCorrect:!1}}const Pe=e=>({...e,idType:le.LOWERCASE,type:y.MS,answers:de(le.LOWERCASE,[Re(),Re(),Re(),Re()]),hints:[""]});function _e(){return{answerIdentifier:"",type:y.ORD,explanations:[he()]}}const De=e=>({...e,idType:le.LOWERCASE,type:y.ORD,answers:de(le.LOWERCASE,[_e(),_e(),_e(),_e()]),hints:[""]});function Le(){return{type:y.SA,widgets:[{type:k.TEXT,text:""}],isSampleResponse:!1,isExplanationRequired:!0,explanations:[he()]}}function qe(e){return{...e,idType:null,type:y.SA,answers:[Le()]}}function $e(){return{answerIdentifier:"",type:y.TCQ,explanations:[he()],isCorrect:!1}}function Me(e,t){switch(e){case y.CALC:return function(e){return{...e,idType:null,type:y.CALC,answers:[{...ve(y.CALC),isSampleResponse:!1}],hints:[""]}}(t);case y.CL:return function(e){let t=[Te(),Te()];return{...e,idType:le.LOWERCASE,type:y.CL,answers:t,hints:[""]}}(t);case y.DRW:return function(e){return{...e,idType:null,type:y.DRW,answers:[{type:y.DRW,widgets:[Se()],isSampleResponse:!1,explanations:[he()]}]}}(t);case y.ES:return function(e){return{...e,idType:null,type:y.ES,answers:[{type:y.ES,widgets:[{type:k.TEXT,text:""}],isSampleResponse:!0,explanations:[he()]}]}}(t);case y.FIB:return Oe(t,v.ONE_PER_ANSWER);case y.FF:return function(e){return qe(e)}(t);case y.GR:return function(e){return{...e,idType:null,type:y.GR,answers:[{type:y.GR,widgets:[{type:k.GRAPH,text:"",source:""}],isSampleResponse:!1,explanations:[he()]}]}}(t);case y.LDGR:return function(e){return{...e,type:y.LDGR,answers:[{type:y.LDGR,widgets:[{type:k.LEDGER,text:"",source:""}],explanations:[he()]}],hints:[""]}}(t);case y.MAT:return function(e){return{...e,idType:le.LOWERCASE,type:y.MAT,answers:de(le.LOWERCASE,[Ie(),Ie(),Ie(),Ie()]),hints:[""]}}(t);case y.MCQ:return ke(t);case y.MS:return Pe(t);case y.ORD:return De(t);case y.SA:return qe(t);case y.TCQ:return function(e){let t=[$e(),$e()];return{...e,idType:le.BOOLEAN,type:y.TCQ,answers:de(le.BOOLEAN,t),hints:[""]}}(t);default:return t}}const Ue=new Map;function Fe(e){switch(e.type){case P.LOAD:Ue.clear(),e.comments.forEach(e=>{Ue.set(e.commentId,e)});break;case P.UPDATE:const{commentId:t,content:n,authorId:a,threadId:r}=e,o={commentId:t,content:n,createdAt:(new Date).toISOString(),authorId:a,threadId:r};Ue.set(e.commentId,o);break;case P.REMOVE:Ue.delete(e.commentId)}}function Ge(){const[e,t]=Object(c.useState)(!1),[n,a]=Object(c.useState)([]),[r,o]=Object(c.useState)();function l(){const e=new Map;return Ue.forEach(t=>{let n=e.get(t.threadId),a=function(e){return{commentId:e.commentId,content:e.content,createdAt:e.createdAt,authorId:e.authorId}}(t);n?n.comments.push(a):e.set(t.threadId,{commentThreadId:t.threadId,comments:[a]})}),e}return{isLoading:e,setIsLoading:t,cachedComments:Ue,authors:n,currentUser:r,addNewUser:function(e){e&&o(e),e&&!n.some(t=>t.authorId===e.authorId)&&a([...n,e])},loadCommentsData:function(e,n){const o=n&&n.length?[...n]:[],l=function(e){const t=new Map;return e&&e.forEach?(e.forEach(e=>{e.comments.forEach(n=>{t.set(n.commentId,{...n,threadId:e.commentThreadId})})}),t):t}(e);r&&!o.some(e=>e.authorId===r.authorId)&&o.push(r),Fe({type:P.LOAD,comments:l}),a(o),t(!1)},commentsUpdater:Fe,getCkThread:function(e){return function(e){return e&&{threadId:e.commentThreadId,comments:e.comments}}(l().get(e))},getThreadArray:function(){return Array.from(l()).map(([e,t])=>t)}}}let je={exerciseId:null,solutions:[Ee()],commentAuthors:[],error:""};const He=c.createContext({}),Ve=c.createContext({});function Qe(e){const t=je,{user:n}=e;if(!t)throw new Error("Exercise info is not defined");const a=Ge();return a.currentUser||a.addNewUser(n),c.createElement(Ve.Provider,{value:n},c.createElement(He.Provider,{value:a},c.createElement(g.d,{initialValues:t,onSubmit:()=>{},enableReinitialize:!0},e.children)))}function We(e,t){let n=e.indexOf(t);if(-1===n)return n;let a=n+t.length+1,r=e.indexOf("]",a);return parseInt(e.substring(a,r),10)}function Xe(e){return We(e,w.ANSWERS)}function Be(e){return e.replace(/\[/g,"-").replace(/\]/g,"").replace(/\./g,"_")}let Je,Ke,Ye,ze,Ze;!function(e){e.Textbook="tbq",e.User="uq",e.Document="dq"}(Je||(Je={})),function(e){e.ONE_PER_ANSWER="Each answer with its own explanation",e.MULTIPLE_PER_EXPLANATION="Multiple answers with one explanation"}(Ke||(Ke={})),function(e){e.MCQ="mcq",e.TCQ="tcq",e.CALC="calc",e.ES="es",e.MS="ms",e.SA="sa",e.FIB="fib",e.DRW="drw",e.GR="gr",e.MAT="mat",e.ORD="ord",e.CL="cl",e.LDGR="ldgr",e.FF="ff"}(Ye||(Ye={})),function(e){e.TEXT="text",e.STEP_BY_STEP="step_by_step"}(ze||(ze={})),function(e){e.ONE_COLUMN="one_column",e.TWO_COLUMN="two_column"}(Ze||(Ze={}));const et=(e,t)=>tt(e)?ct(t):nt(e)?ut(t):at(e)?dt(t):rt(e)?mt(t):ot(e)?pt(t):lt(e)?Et(t):st(e)?gt(t):it(e)?ht(t):"",tt=e=>"explanations[0]"===e.substring(40,55),nt=e=>"explanations[1]"===e.substring(40,55),at=e=>"explanations[0]"===e.substring(40,55)||e.substring(0,20)===M&&"widgets"===e.substring(40,47),rt=e=>e===L,ot=e=>e.substring(0,18)===q,lt=e=>e.substring(0,20)===M,st=e=>"ClAnswer"===e,it=e=>"PillsInput"===e,ct=e=>{switch(e){case Ye.CALC:case Ye.GR:case Ye.TCQ:case Ye.LDGR:case Ye.DRW:case Ye.SA:return j;default:return""}},ut=e=>{switch(e){case Ye.CALC:case Ye.GR:case Ye.TCQ:case Ye.LDGR:case Ye.DRW:case Ye.SA:case Ye.MAT:case Ye.ORD:return V;default:return""}},dt=e=>{switch(e){case Ye.MCQ:case Ye.MS:case Ye.TCQ:case Ye.CALC:case Ye.GR:case Ye.LDGR:case Ye.SA:case Ye.MAT:case Ye.ORD:case Ye.DRW:case Ye.FIB:return j;case Ye.ES:return H;case Ye.CL:return"Explain why answer option(s) is in the category";default:return""}},mt=e=>{switch(e){case Ye.MCQ:case Ye.MS:case Ye.TCQ:case Ye.CALC:case Ye.FIB:case Ye.GR:case Ye.LDGR:case Ye.CL:case Ye.MAT:case Ye.ORD:case Ye.DRW:case Ye.SA:case Ye.ES:return U;default:return""}},pt=e=>{switch(e){case Ye.MCQ:case Ye.MS:case Ye.TCQ:case Ye.CALC:case Ye.GR:case Ye.LDGR:case Ye.CL:case Ye.MAT:case Ye.ORD:case Ye.DRW:case Ye.SA:case Ye.ES:return F;default:return""}},Et=e=>{switch(e){case Ye.GR:return"Enter JSX Graph";case Ye.ES:return"Enter sample response";case Ye.CALC:case Ye.SA:case Ye.FIB:return G;default:return""}},gt=e=>{switch(e){case Ye.CL:return"Enter category Name";default:return""}},ht=e=>{switch(e){case Ye.CL:return Q;default:return""}};n(136),n(79);function ft(e){const{text:t,path:n,onChange:a}=e,[r,o]=Object(c.useState)(!1),l=c.useContext(ns),s=c.useContext(ts),i=c.useContext(He);const u=Be(n);let d=et(n,l),m=function(e){function t(e){return{id:e.authorId,name:e.name,avatar:e.avatar}}return class{constructor(e){this.editor=e}init(){const n=this.editor.plugins.get("Comments"),a=this.editor.plugins.get("Users");for(const n of e.authors)a.getUser(n.authorId)||a.addUser(t(n));e.currentUser&&a.defineMe(e.currentUser.authorId),n.adapter={addComment:t=>(e.commentsUpdater({...t,authorId:e.currentUser&&e.currentUser.authorId,type:P.UPDATE}),Promise.resolve({createdAt:new Date})),updateComment:t=>(e.commentsUpdater({...t,authorId:e.currentUser&&e.currentUser.authorId,type:P.UPDATE}),Promise.resolve()),removeComment:({commentId:t})=>(e.commentsUpdater({commentId:t,type:P.REMOVE}),Promise.resolve()),getCommentThread:t=>Promise.resolve(e.getCkThread(t))}}}}(i),p={...f.defaultConfig,sidebar:document.querySelector(`#${u} .cheditor-sidebar`),...K,extraPlugins:[m],placeholder:d};return c.createElement("div",{className:"cheditor-container","data-testid":n},!i.isLoading&&!r&&c.createElement(h,{key:n,editor:f,config:p,data:t,onChange:function(e,t){const r=t.getData();s.setValue(n,r),a&&a(r,n)},onError:e=>{console.error(e),o(!0)},onInit:function(e){window.CH_EDITORS=window.CH_EDITORS||{},window.CH_EDITORS[n]=e}}),!i.isLoading&&r&&c.createElement("p",{className:"text-alternative-danger-red"},"The editor has crashed. Try reloading the page. If the problem persists report a bug with the question code and this error message."))}function bt(e){const{hints:t,path:n,loadedQuestionCode:a}=e;let r=t.length<4;const o=c.createElement("div",{className:"text-left"},c.createElement("p",{className:"mb-2"},"Hints guide students toward the correct answer of a solution, without directly revealing the answer."),c.createElement("p",null,"Guidelines for hints based on solution type:"),c.createElement("ul",{className:"pl-2"},c.createElement("li",null,"One hint: TCQ (TF) and SA"),c.createElement("li",null,"1–4 hints: MCQ, MS, FIB, ORD, MAT, and CL"),c.createElement("li",null,"No support for hints: DRW, LDGR, and ES"),c.createElement("li",null,"Step-by-step templates will automatically be used as hints: CALC, DRW, LDGR, GR, and any question type that includes a step-by-step")));return c.createElement(g.b,{name:n},e=>c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mt-4 mb-1"},"Hints",c.createElement(E.a,{tooltipContent:o,position:"bottom"},c.createElement("div",{className:"ml-2 position-relative d-inline-block"},c.createElement("i",{className:"chi-help-circle-filled body-1"})))),c.createElement("ul",{className:"list-unstyled"},t.map((t,r)=>c.createElement("li",{className:"form-group",key:`${a}-${r}`},"Hint #",(r+1).toString(),c.createElement("div",{className:"row"},c.createElement("div",{className:"hint-input-wrapper col"},c.createElement(ft,{text:t,path:`${n}[${r}]`,key:r})),c.createElement("div",{className:"pqa-auth-hints-remove d-flex align-items-center pl-2"},c.createElement("button",{className:"btn btn-tertiary btn-icon wa",onClick:()=>e.remove(r)},c.createElement("i",{className:"chi-remove"}),c.createElement("span",{className:"sr-only"},"Delete Hint #",(r+1).toString()))))))),c.createElement("button",{className:"btn btn-secondary btn-sm px-10 d-block mx-auto",onClick:()=>e.push(""),disabled:!r},"Add hint")))}var vt=e=>{let t=e.items.map((t,n)=>{let a=t.label?c.createElement("span",{className:e.labelClassName},t.label):null,r=t.icon?c.createElement("i",{className:e.iconClassName+" "+t.icon}):null,o=c.createElement("span",{className:e.valueClassName},t.value),l=c.createElement(c.Fragment,null,r,a,o);return t.url&&(l=c.createElement("a",{href:t.url},l)),c.createElement("li",{className:"listItem",key:n},l)});return t&&t.length?c.createElement("ul",{className:e.className},t):null};function wt(e){let t=e.errors.map(e=>({value:e}));return c.createElement(vt,{items:t,className:e.className})}n(141);function Ct(e){const{answer:t,path:n}=e,a=Object(g.e)();return c.createElement("div",{className:"row align-items-center ml-0"},c.createElement("div",{className:"form-group form-check mt-2 mb-0 d-flex"},c.createElement("input",{id:`${n}-isSampleResponse-checkbox`,name:`${n}.isSampleResponse`,checked:t.isSampleResponse,onChange:a.handleChange,type:"checkbox",className:"form-check-input"}),c.createElement("label",{className:"form-check-label",htmlFor:`${n}-isSampleResponse-checkbox`},"This is a sample response."),c.createElement(E.a,{tooltipContent:"When a question is open ended and more than one correct response is possible, the solution will include a sample response component in place of an answer component."},c.createElement("div",{className:"ml-2"},c.createElement("i",{className:"chi-help-circle-filled"})))))}function yt(e){return parseInt(e.slice(e.lastIndexOf("[")+1).replace("]",""),10)}n(237);function Nt(e){const{widget:t,path:n,onChange:a}=e,r=Object(c.useCallback)((function(e){a&&a({...t,text:e},n)}),[a,n,t]);return c.createElement(ft,{text:t.text,path:`${n}.text`,onChange:r})}n(238);var St=n(399),xt=n(27);n(239);var Tt=function(e){const{path:t,onChange:n}=e,a={[k.TEXT]:'<i class="chi-text"></i> Add text',[k.GRAPH]:'<i class="chi-graph-bar-line"></i> Add graph',[k.LEDGER]:'<i class="ledger"></i> Add ledger',[k.CODE]:'<i class="chi-angle-brackets"></i> Add code editor'};return c.createElement("div",{className:"widget-dropdown-container form-group mb-0"},c.createElement(St.a,{screenReaderLabel:"Add a new widget",inline:!0,onSelect:(e,t)=>{e&&n(e.value)}},c.createElement(St.d,{"data-testid":`${t}_widget-add-btn`,className:"widget-add-btn btn btn-secondary btn-icon"},c.createElement(xt.a,{icon:"add"})),c.createElement(St.c,{className:"widget-add-dropdown","data-testid":`${t}_widget-select-menu`},Object.keys(a).map((e,t)=>e in a&&c.createElement(St.b,{key:t,index:t,item:{text:a[e],value:e}},c.createElement("span",{dangerouslySetInnerHTML:{__html:a[e]}}))))))},Ot=n(23),It=n.n(Ot),At=n(209);function kt(e,t,n,...a){return t=parseInt(t,10),[...e.slice(0,t),...a,...e.slice(t+n)]}function Rt(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.getElementsByTagName("img"),a=0;a<n.length;a++){var r=n[a].getAttribute("src");if(r)return r}return""}function Pt(e,t,n,a){let r={};function o(e,t,n){Object.values(C).forEach(n=>{r&&r[n]&&r[n].forEach(a=>{(function(e,t){let n=!1;switch(t){case C.HAS_TEXT:n=void 0!==e.text&&"string"==typeof e.text;break;case C.HAS_WIDGETS:n=void 0!==e.widgets&&e.widgets.length;break;case C.HAS_HINTS:n=void 0!==e.hints&&e.hints.length}return n})(e,n)&&a(e,t)})}),n===w.STEPS&&r&&r[n]&&Ce(e)?r[n].forEach(n=>{n(e,t)}):n&&r&&r[n]&&!Ce(e)&&r[n].forEach(n=>{n(e,t)}),Object.values(w).forEach((n,a)=>{let r=n===w.STEPS?w.EXPLANATIONS:n,l=n===w.SOLUTIONS?r:`.${r}`;n===w.STEPS&&e[r]&&e[r][0]&&e[r][0].type===I.STEP_BY_STEP?(l=`.${w.EXPLANATIONS}`,e[r].forEach((e,a)=>{o(e,`${t}${l}[${a}]`,n)})):!e[r]||n===w.STEPS||n===w.EXPLANATIONS&&Ce(e[r][0])||e[n].forEach((e,a)=>{o(e,`${t}${l}[${a}]`,n)})})}t.forEach(e=>{const{target:t,callback:n}=e;t in r?r[t].push(n):r[t]=[n]}),n&&a?o(e,n,a):o(e,"",w.EXERCISES)}const _t="/api/v2/solutions/update/",Dt="/api/v2/solutions/source/",Lt="/api/v2/solutions/previews/",qt="/api/v2/solutions/attachments/",$t="/api/v2/solutions/generate-image/",Mt="/api/v2/solutions/interactions/reviewed/";var Ut=class{static updateSolution(e,t,n){const a=n.solutions[0],r=Object(At.a)(a,["type","hints","commentThreads","answers","externalLink","hasSameExplanationForAllAnswers","generalComments","containsArt","dok","difficulty"]),o=this.convertCodeWidgetsToBase64(r);return It.a.post(_t,{solutionContent:o,sourceType:e,sourceId:t,commentAuthors:n.commentAuthors})}static convertCodeWidgetsToBase64(e){return Pt(e,[{target:w.WIDGETS,callback:(e,t)=>{"code"===e.type&&(e.source=btoa(e.source))}}]),e}static loadExistingSolution(e,t){return It.a.get(Dt,{params:{sourceId:encodeURIComponent(e),sourceType:t}})}static cachePreview(e){const t=JSON.stringify(e),n=JSON.parse(t),a=this.convertCodeWidgetsToBase64(n),r=JSON.stringify(a);return It.a.post(Lt,{preview:r}).then(e=>e.data)}static uploadAttachment(e){return It.a.post(qt,e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)}static generateLedgerImage(e){return It.a.post($t,{driveUrl:e}).then(e=>e.data.attachmentId)}static markAsReviewed(e,t){return It.a.post(Mt,{sourceId:e,sourceType:t})}},Ft=(n(150),n(123)),Gt=n(133);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Ht=c.forwardRef(({to:e,state:t,children:n,...a},r)=>c.createElement(Gt.a,jt({ref:r},a,{to:{pathname:e.url.split("#")[0],search:window.location.search,hash:e.url.split("#")[1],state:t}}),n));var Vt=n(125),Qt=n(126);let Wt,Xt,Bt=window.dataLayer,Jt=window.tracker;var Kt;!function(e){e.PRIMARY="Primary",e.SECONDARY="Secondary",e.INTERSTITIAL="Interstitial",e.BANNER="Banner",e.LINK="Link"}(Wt||(Wt={})),function(e){e.TAB="Tab",e.POPUP="Pop-up",e.VIDEO="Video",e.MODAL="modal",e.RADIO_BUTTON="radio button",e.RADIO_SELECTION="Radio Selection",e.SECURE_PAYMENT_FORM="Secure Payment Form",e.CALL_TO_ACTION="Call to Action",e.FLOATING_PROMPT="Floating Prompt",e.INPUT="Input",e.FORM="Form"}(Xt||(Xt={})),function(e){e.LOGGED_OUT="logged out",e.BASIC="basic",e.PREMIER="premier"}(Kt||(Kt={}));const Yt=(e,t={},{setPageType:n,timestamp:a}={})=>{var r;const o={...t,isLoggedIn:Boolean(null==(r=window.__CH_PERSON)?void 0:r.id)};if(void 0!==Bt){let t=o;void 0!==Jt&&Jt.super_properties instanceof Object&&(t={...Jt.super_properties,...t}),n&&(t.page_type=Jt.get_page_type()),Bt.push({event:"User Tracking Event",user_tracking_properties:{eventName:e,properties:t},_clear:!0})}const l=window.amplitude;var s,i,c,u,d,m,p,E;l?(null!=(s=window)&&null!=(i=s.__CH_PERSON)&&i.id&&l.getInstance().setUserId(window.__CH_PERSON.id),null!=(c=window)&&null!=(u=c.__CH_TRACKER)&&u.DEVICE_ID&&l.getInstance().setDeviceId(window.__CH_TRACKER.DEVICE_ID),null!=(d=window)&&null!=(m=d.__CH_TRACKER)&&m.SESSION&&l.getInstance().setSessionId(window.__CH_TRACKER.SESSION),a?l.getInstance().logEventWithTimestamp(e,o,a):l.getInstance().logEvent(e,o)):null==(p=window.__CH_TRACKER)||null==(E=p.BUFFER)||E.push({eventName:e,properties:o})},zt=(e={})=>{var t;null==(t=window.amplitude)||t.getInstance().setUserProperties(e)},Zt=()=>({path:location.pathname,referrer:window.__CH_ReactRouter_referrer||document.referrer,search:location.search,title:document.title,pageUrl:location.href}),en=()=>{Yt("Default Page Viewed",Zt())},tn=()=>{Yt("landing_doc_uploader",Zt())},nn=e=>{Yt("CTA Clicked",ln(e))},an=e=>{Yt("Element Focused",ln(e))},rn=e=>{Yt("Content Viewed Within a Page",ln(e))},on=(e,t)=>{Yt(e,ln(t))},ln=e=>({...Zt(),...e}),sn=e=>{const t=cn();Yt("Search Result Selected",ln({...e,userState:t}))},cn=()=>{const e=window.__CH_PERSON;return e?e.dimension2===Kt.BASIC?Kt.BASIC:Kt.PREMIER:Kt.LOGGED_OUT};let un;!function(e){e[e.NOT_STARTED=1]="NOT_STARTED",e[e.COMING_SOON=2]="COMING_SOON",e[e.PUBLISHED=3]="PUBLISHED"}(un||(un={}));un.PUBLISHED,un.NOT_STARTED,un.COMING_SOON;let dn,mn;!function(e){e.CHAPTER="chapter",e.SECTION="section",e.HEADING="heading"}(dn||(dn={})),function(e){e.MCQ="mcq",e.TCQ="tcq",e.MS="ms",e.CALC="calc",e.SA="sa",e.ORD="ord",e.ES="es",e.MAT="mat",e.DRW="drw",e.FIB="fib",e.LDGR="ldgr",e.GR="gr",e.CL="cl",e.FF="ff",e.TUTOR="tutor_answer"}(mn||(mn={}));mn.MCQ,mn.MS,mn.TCQ,mn.ORD,mn.MAT,mn.CL;let pn,En;!function(e){e.Exact="exact",e.Keywords="simple-regex-v1"}(pn||(pn={})),function(e){e.USER_FIRST_ATTEMPT="user_first_attempt",e.USER_SUBSEQUENT_ATTEMPT="user_subsequent_attempt",e.WRONG_ANSWER="wrong_answer",e.RIGHT_ANSWER="right_answer",e.PARTIALLY_RIGHT="partially_right",e.REVEAL_ANSWER="reveal_answer"}(En||(En={}));n(127),n(197),n(101);var gn=n(128);n(394);var hn=n(393);n(198);n(3);class fn{static pluralize(e,t){return Array.isArray(t)?1===e?t[0]:t[1]:t+(1===e?"":"s")}static boldWord(e,t,n="strong"){var a=new RegExp("("+this.escapeRegExp(t)+")","gi");return e.replace(a,"<"+n+">$1</"+n+">")}static formatNumber(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}static escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}static removeSpaces(e){return e.replace(/\s+/g,"")}static decodeHtmlEntities(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")}static decode(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}}var bn,vn;let wn;!function(e){e.IDLE="idle",e.SUBMITTING="submitting",e.DEPOSITING="depositing",e.ERROR="error",e.INTENT_MODAL="intent_modal"}(bn||(bn={})),function(e){e.ERROR="error",e.SUBMITTED="submitted",e.DEPOSITED="deposited",e.REDIRECTED="redirected",e.NO_QUESTION="no_question"}(vn||(vn={})),function(e){e[e.CURRENT_QUESTION=0]="CURRENT_QUESTION",e[e.WHOLE_CHAPTER=1]="WHOLE_CHAPTER"}(wn||(wn={}));const{trackCustomEvent:Cn,getUserState:yn}=r,Nn=(e,t)=>{e&&Yt("[Textbook] Exercise Click",{exerciseId:e.getExerciseId(),action:t,url:window.location.pathname})},Sn=Object(c.createContext)(void 0);function xn(){return Object(c.useContext)(Sn)}function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Vt.setAppElement("body");var On=function(e){const[t,n]=Object(c.useState)(!1),a=()=>{document.body.classList.remove("modal-open"),n(!1)},r=xn();return c.createElement(c.Fragment,null,c.createElement(gn.a,{"aria-label":"Expand Image",className:"bg-transparent border-0 p-0",onClick:()=>{document.body.classList.add("modal-open"),n(!0),Nn(r,"Expand Image")}},c.createElement("img",Tn({className:"w-100"},e))),c.createElement(Vt,{isOpen:t,overlayClassName:"n",className:"n",style:{overlay:{position:"fixed",zIndex:1050}},onRequestClose:a},c.createElement("div",{className:`${Qt.imageFullscreenShow} bg-neutral-100`},c.createElement("img",Tn({className:"p-4"},e)),c.createElement(gn.a,{variant:"tertiary","aria-label":"Close",onClick:a,className:`btn-icon text-neutral-500 ${Qt.closeBtn}`,icon:"remove"}))))},In=n(130);var An=function({math:e,block:t}){return t?c.createElement(In.BlockMath,{math:e}):c.createElement(In.InlineMath,{math:e})};function kn(){return(kn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Rn=new Ft.Parser,Pn=[{ruleName:"imgPopout",shouldProcessNode:function(e){return"img"===e.name},processNode:(e,t)=>c.createElement(On,e.attribs)},{ruleName:"responseTable",shouldProcessNode:function(e){return"table"===e.name&&!e.attribs.class},processNode:(e,t)=>c.createElement("div",{className:"table-responsive"},c.createElement("table",kn({},e.attribs,{className:"table w-auto"}),t))},{ruleName:"crossRefLink",shouldProcessNode:function(e){return"a"===e.name&&"cross-reference"===e.attribs.class&&e.attribs.href},processNode:(e,t)=>{const{href:n,...a}=e.attribs;return c.createElement(Ht,kn({to:{url:n}},a),t)}},{ruleName:"formula",shouldProcessNode:e=>"formula"===e.name&&e.children.length,processNode:(e,t)=>{const n=fn.decodeHtmlEntities(t[0]),a="block"===e.attribs["data-display"];return c.createElement(An,{math:n,block:a})}},{ruleName:"default",shouldProcessNode:function(e){return!0},processNode:new Ft.ProcessNodeDefinitions(c).processDefaultNode}];function _n(){return!0}const Dn={excludedRules:[]};function Ln(e,t){const n={...Dn,...t},{excludedRules:a}=n;let r=Pn;return a.length>0&&(r=Pn.filter(e=>a.every(t=>e.ruleName!==t))),Rn.parseWithInstructions(e,_n,r)}function qn(e){return c.createElement("div",{className:"widget-display-container"},Ln(e.img),c.createElement("a",{href:Rt(e.img),target:"_blank",rel:"noreferrer"},"Attachment URL"))}n(173);function $n(e){const{widget:t,path:n,onInsert:a,onCancel:r,isSingleWidget:o,isDirty:l,newData:s}=e,i=Object(c.useContext)(ts);return c.createElement(c.Fragment,null,!o&&c.createElement("div",{className:"d-flex justify-content-end"},c.createElement(d,{color:"secondary",size:"sm",onClick:function(){i.setValue(n,t),r&&r()},additionalClasses:"mr-3"},"Cancel"),c.createElement(d,{color:"primary",size:"sm",onClick:function(){i.setValue(n,s),a&&a()},disabled:!s.text||l},"Add")))}function Mn(e,t,n){let a=null,r=null;try{e=function(e){let t=e.match(/var (.+) = JXG\.JSXGraph\.initBoard\("(.+?)"/);if(t){let n=t[1];e=e.replace(t[0],t[0].replace(t[2],"jxgboxa")),"board"!==n&&(e=e+"let board = "+n+";")}return e}(e=function(e){const t=/<script[\s\S]*?>/gi;let n=e;for(;t.test(n);)n=n.replace(t,"");const a=/<\/script>/gi;for(;a.test(n);)n=n.replace(a,"");return n}(e)),a=function(e){return new Function('JXG.Options.text.display ="internal";'+e+"return board;")}(e=function(e){let t=e.match(/point.*{((?!opacity).)*(?=fillColor)((?!opacity).)*}/gm),n=e;return null==t||t.forEach(e=>{n=n.replace(e,`${e.substring(0,e.length-1)}, opacity: 1}`)}),n}(e='JXG.Options.board.showCopyright=false;JXG.Options.axis.strokeColor="#333333";JXG.Options.hatch.strokeColor="#3eabc9";JXG.Options.curve.strokeColor="#3eabc9";JXG.Options.arc.strokeColor="#3eabc9";JXG.Options.angle.strokeColor="#3eabc9";JXG.Options.point.strokeColor="#1a7096";JXG.Options.circle.strokeColor="#3eabc9";JXG.Options.bisector.strokeColor="#333333";JXG.Options.circumcircle.strokeColor="#3eabc9";JXG.Options.circumcirclearc.strokeColor="#3eabc9";JXG.Options.circumcirclesector.strokeColor="#3eabc9";JXG.Options.conic.strokeColor="#3eabc9";JXG.Options.incircle.strokeColor="#3eabc9";JXG.Options.normal.strokeColor="#333333";JXG.Options.parallel.strokeColor="#333333";JXG.Options.parallel.strokeColor="#333333";JXG.Options.perpendicular.strokeColor="#333333";JXG.Options.perpendicularsegment.strokeColor="#333333";JXG.Options.slider.strokeColor="#333333";JXG.Options.tapemeasure.strokeColor="#333333";JXG.Options.ticks.strokeColor="#333333";JXG.Options.tracecurve.strokeColor="#333333";JXG.Options.turtle.strokeColor="#333333";JXG.Options.line.strokeColor="#3eabc9";JXG.Options.htmlslider.strokeColor="#333333";JXG.Options.label.strokeColor="#333333";JXG.Options.angle.fillColor="#dbf0f5";JXG.Options.angle.fillOpacity=0.5;JXG.Options.circle.fillColor="#dbf0f5";JXG.Options.circle.fillOpacity=0.5;JXG.Options.circumcirclesector.fillColor="#dbf0f5";JXG.Options.circumcirclesector.fillOpacity=0.5;JXG.Options.inequality.fillColor="#dbf0f5";JXG.Options.inequality.fillOpacity=0.5;JXG.Options.point.fillColor="#dbf0f5";JXG.Options.point.fillOpacity=0.5;JXG.Options.polygon.fillColor="#dbf0f5";JXG.Options.polygon.fillOpacity=0.5;JXG.Options.regularpolygon.fillColor="#dbf0f5";JXG.Options.regularpolygon.fillOpacity=0.5;JXG.Options.riemannsum.fillColor="#dbf0f5";JXG.Options.riemannsum.fillOpacity=0.5;JXG.Options.sector.fillColor="#dbf0f5";JXG.Options.sector.fillOpacity=0.5;'+e))()}catch(e){return n(!1),t("Error with JSXGraph Code: Failed to generate graph"),null}if(null!=a){let e=(new XMLSerializer).serializeToString(a.renderer.svgRoot);e=function(e){const t=/&lt;sub&gt;/gi;for(;t.test(e);)e=e.replace(t,"<tspan baseline-shift = 'sub'>");const n=/&lt;\/sub&gt;/gi;for(;n.test(e);)e=e.replace(n,"</tspan>");const a=/&lt;sup&gt;/gi;for(;a.test(e);)e=e.replace(a,"<tspan baseline-shift = 'super'>");const r=/&lt;\/sup&gt;/gi;for(;r.test(e);)e=e.replace(r,"</tspan>");return e}(e),r=new Blob([e],{type:"image/svg+xml"})}return r||(t("Error with JSXGraph Code: Failed to generate graph"),null)}function Un(e){const{widget:t,path:n,onChange:a,onInsert:r,onCancel:o,isSingleWidget:l}=e,[s,i]=Object(c.useState)(!1),[u,d]=Object(c.useState)(!1),[m,p]=Object(c.useState)(""),[E,g]=Object(c.useState)(t),h=Object(c.useContext)(ts),f=Object(c.useContext)(ns),b=f===y.GR?et(n,f):"";let v="";if(c.useEffect(()=>{if(t&&t.isStartingOpen){let e={...t};delete e.isStartingOpen,h.setValue(n,e)}},[t,n,h]),t.text!==E.text&&l&&g(t),""!==E.text){let e=/\/solutions\/attachments\/\d+\//,t=E.text.match(e);t&&t.length>0&&(v=t[0])}let w=null;return E.source?s&&(w="To view or update graph, click 'Generate Graph'"):w="Enter JSXGRaph to create a graph",c.createElement(c.Fragment,null,w&&c.createElement("div",{className:"graph-widget-editor-prompt prompt my-1 rounded border border-neutral-300 bg-neutral-200"},c.createElement("i",{className:"prompt-icon chi-infomation-circle-filled text-primary-500"}),c.createElement("p",null,w)),m&&c.createElement("p",{className:"generate-graph-warning text-alternative-danger-red my-1"},m),c.createElement("div",{className:"row mx-0 mb-2 border border-neutral-400 rounded"},c.createElement("div",{className:"col-6 pl-0 border-right border-neutral-400"},c.createElement("div",{className:"p-2"},c.createElement("code",{className:"language-html","data-lang":"html"},c.createElement("p",{className:"blackText"},"<script>")),c.createElement("textarea",{"data-testid":`${Be(n)}_graph-source-input`,placeholder:b,className:"col-12 graphCodeEditor form-control",value:E.source,onChange:function(e){let t=e.currentTarget.value;i(!0),g({...E,source:t.trim()})}}),c.createElement("code",{className:"language-html mb-2","data-lang":"html"},c.createElement("p",{className:"blackText"},"<\/script>")))),c.createElement("div",{className:"col-6 pr-0"},c.createElement("div",{className:"mt-2 ml-2 mr-2"},c.createElement("div",{className:"row mb-2"},c.createElement("button",{className:"btn btn-secondary btn-sm px-4",onClick:function(){d(!0),p("");let e=Mn(E.source,p,d);if(e){let t=new FormData;t.append("file",e),v="",Ut.uploadAttachment(t).then(e=>{let t={...E,text:`<img src="${e}"/>`};g(t),l&&h.setValue(n,t),i(!1),d(!1)}).catch(e=>{let t;d(!1);try{t=JSON.parse(e.response)}catch(e){t=null}p("Something went wrong while saving your image. Please try again.")})}}},c.createElement("i",{className:"chi-graph-bar-line fa-line-chart2 ml-0 pr-2"}),"Generate Graph"),c.createElement("div",null,c.createElement("i",{className:"chi-simple-spinner spinner spinner-sm ml-3 align-bottom "+(u?"visible":"invisible")}))),c.createElement("div",{id:"jxgboxa",className:"d-none",style:{height:"500px",width:"500px"}}),!s&&c.createElement(qn,{img:E.text})))),c.createElement($n,{widget:t,path:n,onInsert:r,onCancel:o,isSingleWidget:l,isDirty:s,newData:E}))}n(174);function Fn(e){const{widget:t,path:n,index:a,isSingleWidget:r}=e,[o,l]=c.useState(!!t.isStartingOpen);Object(g.e)();function s(){l(!o)}return c.createElement(c.Fragment,null,r&&c.createElement(Un,{widget:t,path:n,index:a,onInsert:s,onCancel:s,isSingleWidget:r}),!r&&o&&c.createElement(hn.a,{isOpen:o,closeModal:s,closeOnClickOutside:!0},c.createElement("h2",null,"Add graph"),c.createElement(Un,{widget:t,path:n,index:a,onInsert:s,onCancel:s})),!r&&!o&&c.createElement("div",{className:"widget-preview-container d-inline-block position-relative border rounded border-neutral-400"},t.text&&c.createElement(qn,{img:t.text}),!t.text&&c.createElement("p",{className:"widget-display-alert text-alternative-danger-red pr-7"},"Please generate a graph image"),c.createElement(d,{color:"secondary",paddingClass:"px-2",size:"sm",additionalClasses:"widget-edit-overlay-btn",isIconOnly:!0,onClick:s},c.createElement("span",{className:"sr-only"},"Edit this graph"),c.createElement("i",{className:"chi-pencil"}))))}n(329);function Gn(e){return c.createElement("div",{className:"widget-display-container"},Ln(e.img),c.createElement("a",{href:Rt(e.img),target:"_blank",rel:"noreferrer"},"Attachment URL"))}const jn="/solutions/attachments/";function Hn(e){const{path:t,widget:n,onInsert:r,onCancel:o,isSingleWidget:l}=e,s=Object(c.useContext)(ts),[i,u]=Object(c.useState)(n),[m,p]=Object(c.useState)(i.source),[E,g]=Object(c.useState)(!1),[h,f]=Object(c.useState)(!1),[b,v]=Object(c.useState)(!!i.text==!!i.source);let[w,C]=Object(c.useState)(!1);let y=i.source&&!b?"Click 'Generate image' to update the ledger image":"Please enter a link to Google Sheets";return c.createElement(c.Fragment,null,c.createElement("div",{className:"row justify-content-between mb-2 mx-0 my-1"},c.createElement("div",{className:"mr-2 d-flex"},c.createElement("img",{className:"mt-1",src:"/assets/img/authoring/google-sheets-96x96.png",alt:"Google sheets icon",width:"37",height:"37"})),c.createElement("div",{className:"flex-grow-1 mr-3"+(E?" was-validated":"")},c.createElement("input",{className:"form-control"+(i.source&&!b?" is-invalid":""),type:"text",placeholder:"Enter google sheet link with ledger",required:!0,pattern:"https:\\/\\/(docs.google.com\\/spreadsheets\\/d\\/.*|drive.google.com\\/open\\?id=.*)",value:m,onChange:function(e){p(e.currentTarget.value),g(!0),i.source&&v(!1)}}),c.createElement("div",{className:"invalid-feedback feedback-icon"},c.createElement("i",{className:"chi-alert-filled"})),c.createElement("div",{className:"invalid-feedback"},y)),c.createElement("div",{className:""},c.createElement(d,{onClick:function(){if(g(!0),C(!0),m){Ut.generateLedgerImage(m).then(e=>{!function(e,n){let a={...i,text:e,source:n};u(a),l&&s.setValue(t,a)}(`<img src="${jn}${e}/" />`,m),g(!1),v(!0),C(!1)},e=>{let n=e.response&&e.response.error&&e.response.error.message?e.response.error.message:"Failed to generate image.";s.setValue(`${a.PATH_SOLUTION}.validationErrors`,[{path:t.replace("[",".").replace("]",""),message:n}]),C(!1)})}},color:"secondary",size:"sm",paddingClass:"px-2",disabled:w},"Generate image"))),i.text&&c.createElement(Gn,{img:i.text}),c.createElement($n,{widget:n,path:t,onInsert:r,onCancel:o,isSingleWidget:l,isDirty:h,newData:i}))}function Vn(e){const{widget:t,path:n,index:a,isSingleWidget:r}=e,[o,l]=c.useState(!!t.isStartingOpen);Object(g.e)();function s(){l(!o)}return c.createElement(c.Fragment,null,r&&c.createElement(Hn,{widget:t,path:n,index:a,onInsert:s,onCancel:s,isSingleWidget:r}),!r&&o&&c.createElement(hn.a,{isOpen:o,closeModal:s,closeOnClickOutside:!0},c.createElement("h2",null,"Add ledger"),c.createElement(Hn,{widget:t,path:n,index:a,onInsert:s,onCancel:s})),!r&&!o&&c.createElement("div",{className:"widget-preview-container d-inline-block position-relative border rounded border-neutral-400"},t.text&&c.createElement(Gn,{img:t.text}),!t.text&&c.createElement("p",{className:"widget-display-alert text-alternative-danger-red pr-7"},"Please generate a ledger image"),c.createElement(d,{color:"secondary",paddingClass:"px-2",size:"sm",additionalClasses:"widget-edit-overlay-btn",isIconOnly:!0,onClick:s},c.createElement("span",{className:"sr-only"},"Edit this ledger"),c.createElement("i",{className:"chi-pencil"}))))}var Qn=n(199),Wn=n.n(Qn);n(335),n(337),n(338),n(339),n(340),n(341);function Xn(e){const{widget:t,path:n}=e,a=Object(c.useContext)(ts);const r=[Y,z,Z];const o=function(e,t){for(let n of t)if(n.value===e)return n}(t.language,r);return c.createElement("div",{className:"code-container"},c.createElement("div",{className:"row"},c.createElement("div",{className:"form-group col-lg-6"},c.createElement("label",{htmlFor:e.path+".language"},"Language"),c.createElement(St.a,{id:e.path+".language",screenReaderLabel:"Selected language for code widget",selectedItem:o,onSelect:(e,r)=>{e&&function(e){a.setValue(n,{...t,language:e})}(e.value)}},c.createElement(St.d,null,null==o?void 0:o.text),c.createElement(St.c,null,r.map((e,t)=>c.createElement(St.b,{key:e.text,index:t,item:e}))))),c.createElement("div",{className:"form-group col-lg-6"},c.createElement("label",{htmlFor:`${n}.languageVersion`},"Version"),c.createElement(g.a,{id:`${n}.languageVersion`,name:`${n}.languageVersion`,className:"form-control",type:"text",placeholder:"Enter the language version"}))),c.createElement(Wn.a,{className:"col-lg-12",mode:t.language,theme:"tomorrow_night_bright",onChange:function(e){a.setValue(n,{...t,source:e})},value:t.source,style:{width:"100%",height:"500px"}}))}function Bn(e){const{widgets:t,path:n,onChange:a,isSingleWidget:r}=e;return c.createElement(g.b,{name:n},e=>c.createElement(c.Fragment,null,c.createElement("ul",{className:"widget-list list-unstyled clearfix"+(0===t.length?" is-empty":"")+(r?" widget-list-single":"")},t.map((t,o)=>c.createElement("li",{className:`widget-item widget-item-type-${t.type}`,key:o},c.createElement(Jn,{widget:t,path:`${n}[${o}]`,index:o,onChange:a,onRemove:t=>{e.remove(o)},isSingleWidget:r}),!r&&c.createElement("button",{className:"widget-remove-btn btn btn-secondary bg-neutral-400 justify-content-center align-items-center",onClick:()=>e.remove(o)},c.createElement("span",{className:"sr-only"},"Remove widget number ",o+1,", ",t.type," type"),c.createElement("i",{className:"chi-remove"}))))),!r&&c.createElement(Tt,{path:`${n}`,onChange:t=>{!function(e,t){let n=xe(e);e!==k.GRAPH&&e!==k.LEDGER||(n.isStartingOpen=!0),t.push(n)}(t,e)}})))}function Jn(e){const{widget:t,path:n,index:a,onChange:r,onRemove:o,isSingleWidget:l}=e;return c.createElement(c.Fragment,null,t.type===k.TEXT&&c.createElement(Nt,{widget:t,path:n,onChange:r,onRemove:o}),t.type===k.GRAPH&&c.createElement(Fn,{widget:t,path:n,index:a,onChange:r,onRemove:o,isSingleWidget:l}),t.type===k.LEDGER&&c.createElement(Vn,{widget:t,path:n,index:a,onChange:r,onRemove:o,isSingleWidget:l}),t.type===k.CODE&&c.createElement(Xn,{widget:t,path:n}))}n(342);function Kn(e){const{explanation:t,path:n,onRemove:a}=e,r=Object(c.useContext)(ts),o=yt(n),l=e=>{const a=function(e,t){switch(t){case A.ONE_COLUMN:if(e.explanations.length>1){const t=e.explanations[1].widgets.filter(e=>!Ne(e));e.explanations.pop(),e.explanations[0].widgets=[...e.explanations[0].widgets,...t]}return e;case A.TWO_COLUMN:for(;e.explanations.length<2;)e.explanations.push(he());return e}}(t,e.currentTarget.value);r.setValue(n,a)};return c.createElement(c.Fragment,null,c.createElement("div",{className:"pqa-explanation-subheading row align-items-center justify-content-end mb-1"},c.createElement("div",{className:"col-md-4"},c.createElement("div",{className:"d-flex align-items-center"},c.createElement("span",{className:"pqa-step-heading"},"STEP ",o+1),c.createElement("div",{id:"pqa-explanation-step-toggle-btn",className:"row ml-1"},c.createElement("button",{disabled:1===t.explanations.length,value:A.ONE_COLUMN,className:"btn btn-link ml-2 pqa-toggle",onClick:l},"1 column"),c.createElement("div",{className:"mx-1 align-self-center"}," | "),c.createElement("button",{disabled:2===t.explanations.length,value:A.TWO_COLUMN,className:"btn btn-link pqa-toggle",onClick:l},"2 columns")))),c.createElement("div",{className:"col-md-1 offset-md-7 text-right"},c.createElement("button",{className:"btn btn-tertiary btn-icon",onClick:a},c.createElement("i",{className:"chi-remove"}),c.createElement("span",{className:"sr-only"},"Delete step ",o)))),c.createElement("div",{className:"row mb-2"},t.explanations.map((e,a)=>c.createElement("div",{key:a,className:`${t.explanations.length>1?"step-column col-md-6":"col-md"}`},c.createElement(Bn,{widgets:e.widgets,path:`${n}.explanations[${a}].widgets`})))))}function Yn(e){const{answer:t,path:n,isStepByStep:a}=e,r=Object(c.useContext)(ts);return c.createElement("div",{className:"form-group form-check mt-2 mb-1 d-inline-block"},c.createElement("input",{id:`${n}-isExplanationRequired-checkbox`,type:"checkbox",className:"form-check-input",checked:!t.isExplanationRequired,onChange:function(){let e=[];t.isExplanationRequired||(e=a?[we()]:[he()]),r.setValue(n,{...t,explanations:e,isExplanationRequired:!t.isExplanationRequired})}}),c.createElement("label",{className:"form-check-label",htmlFor:`${n}-isExplanationRequired-checkbox`},"No explanation required"))}n(343);function zn(e){const{answer:t,answerPath:n,path:a}=e,r=Object(c.useContext)(ts),o=t.explanations[0],l="isExplanationRequired"in t&&!1===t.isExplanationRequired;function s(e){const a=fe(t,e.currentTarget.value);r.setValue(n,a)}const i=o&&w.WIDGETS in o,u=o&&w.EXPLANATIONS in o,d=c.createElement("div",{className:"pb-2"},c.createElement("p",{className:"mb-2"},c.createElement("strong",null,"Simple:")," use this option when explanation doesn't require clear breakdown"),c.createElement("p",null,c.createElement("strong",null,"Step-by-step:")," Use this option when multiple steps (e.g. calculations, break down of processes) are needed to solve the problem."));return c.createElement("div",{className:"pqa-explanation-container mt-4"},c.createElement("div",{className:"pqa-explanation-heading row align-items-center"},c.createElement("div",{className:"col-12 col-md-9"},c.createElement("div",{className:"d-flex mb-1"},c.createElement("h2",{className:"h6"},"Explanation"),!l&&c.createElement("div",{id:"pqa-explanation-type-toggle-btn",className:"row ml-2"},c.createElement("button",{disabled:i,className:"btn btn-link pqa-toggle",value:I.TEXT,onClick:s},"Simple"),c.createElement("div",{className:"mx-1 align-self-center"}," | "),c.createElement("button",{disabled:u,className:"btn btn-link pqa-toggle",value:I.STEP_BY_STEP,onClick:s},"Step-by-step")),c.createElement(E.a,{tooltipContent:d},c.createElement("div",{className:"ml-4"},c.createElement("i",{className:"chi-help-circle-filled"}))))),c.createElement("div",{className:"col-12 col-md-3 d-flex justify-content-end step-explanation-required-container"},"isExplanationRequired"in t?c.createElement(Yn,{answer:t,path:n,isStepByStep:u}):null)),!l&&c.createElement("div",null,c.createElement(g.b,{name:a},e=>c.createElement(c.Fragment,null,u?t.explanations.map((t,n)=>c.createElement(Kn,{key:Be(`${a}[${n}]`),explanation:t,path:`${a}[${n}]`,onRemove:()=>e.remove(n)})):null,o&&"widgets"in o&&c.createElement(Bn,{widgets:o.widgets,path:`${a}[0].widgets`}),u?c.createElement("button",{className:"btn btn-secondary btn-sm px-10 mx-auto d-block",onClick:()=>e.push(we())},"Add step"):null))))}function Zn(e){const{answer:t,path:n}=e;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),t&&t.widgets&&c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`}),c.createElement(Ct,{answer:t,path:n}),c.createElement("div",{className:"mt-2"},c.createElement(zn,{answer:t,answerPath:`${n}`,path:`${n}.explanations`})))}n(180);function ea(e){const{types:t,selected:n,onChange:a}=e;return c.createElement(c.Fragment,null,c.createElement("label",{htmlFor:"answer-id-selector"},"Prepopulated answer format"),c.createElement("select",{id:"answer-id-selector","data-testid":"answer-id-selector",className:"form-select",onChange:a,value:n},Object.values(t).map(e=>c.createElement("option",{key:e},e))))}var ta=n(46);const na=(e,t)=>n=>{const{destination:a,source:r}=n;a&&(t(`${D}.idType`,le.CUSTOM),e.move(r.index,a.index))},aa="solutions[0]",ra=6,oa="text",la="step_by_step",sa={[y.MCQ]:!0,[y.MS]:!0,[y.TCQ]:!0,[y.CALC]:!0,[y.ES]:!1,[y.SA]:!0,[y.FIB]:!0,[y.DRW]:!1,[y.GR]:!0,[y.MAT]:!0,[y.ORD]:!1,[y.CL]:!0,[y.FF]:!0,[y.LDGR]:!0};function ia(e,t,n){let a=[t];e&&e.message&&(a=[e.message]),n("error",a)}function ca(e){try{var t,n,a;return(null==e?void 0:null==(t=e.response)?void 0:null==(n=t.data)?void 0:null==(a=n.error)?void 0:a.message)||JSON.parse(e.response).error}catch(e){return"Something went wrong. Please refresh and try again."}}const ua=0;function da(e,t,n,a=!1){return e===ua?(ia({message:"Could not connect to the server. Please try again. If the problem persists, try restarting your Wi-Fi.",validationDetails:[]},"",t),a?n():null):n()}function ma(e,t){e&&e.validationDetails&&e.validationDetails.length>0&&t(`${l.PATH_SOLUTION}.validationErrors`,e.validationDetails)}function pa(e,t){if(!e||!e.map)return[];let n=e.map(e=>`${e.path}: ${e.message}`);return t&&""!==t.trim()&&n.push(t),n}class Ea{constructor(e,t){this.message=e,this.validationDetails=t}}let ga=document.createElement("p");function ha(e,t){let n=e.match(/<formula( data-display="[A-z\-_]*")?>[\0-\uFFFF]*?<\/formula>/gs)||[],a=[];return n.forEach(e=>{let n=e.replace(/<\/?formula( data-display="[A-z\-_]*")?>/g,"");n=(new DOMParser).parseFromString(e,"text/html").documentElement.textContent||"";try{katex.render(String.raw`${n}`,ga)}catch{a.push({path:t,message:`"${n}" is not valid KaTeX`})}}),a}const fa=(e,t)=>void 0===e?t:e,ba=(e,t,n=!0)=>new Array(e).fill(t).map(({value:e,...t},a)=>({value:n?(+e+a).toString():+e+a,...t})),va="/api/v2/solutions/review/",wa="/api/v1/textbooks/questions/published/",Ca="/api/v1/textbooks/questions/publish/",ya="correctness",Na="learning",Sa="style",xa="grammar",Ta="Is the answer correct?",Oa="Learning and comprehension",Ia="Style and formatting",Aa="Grammar and syntax",ka="It is ready to publish.",Ra="This solution may infringe copyright.",Pa="readyToPublish",_a="copyright",Da="prevCopyright",La="qcStatus",qa="QC Status",$a="Yes",Ma="No",Ua=0,Fa=1,Ga="UPDATE_SCORING_WITH_API_VALUES",ja="UPDATE_PUBLISHED",Ha="UPDATE_COPYRIGHT",Va="UPDATE_SCORING",Qa="UPDATE_QC_STATUS",Wa="RESET",Xa={[ka]:Pa,[Ra]:_a},Ba={[ka]:ja,[Ra]:Ha},Ja="Something went wrong. Please refresh the page to attempt to load the Review section again.";var Ka=n(93);const Ya=()=>c.createElement("svg",{version:"1.1",viewBox:"0 0 17 24",style:{width:"24px",height:"24px"}},c.createElement("defs",null,c.createElement("path",{id:"b",d:"m6 3c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm0 9c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm0 9c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"}),c.createElement("path",{id:"a",d:"m6 3c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm0 9c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3zm0 9c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"})),c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("mask",{id:"d",fill:"white"},c.createElement("use",{xlinkHref:"#b"})),c.createElement("g",{fill:"#A7AAAD",mask:"url(#d)"},c.createElement("g",{transform:"translate(-9)"},c.createElement("rect",{width:"24",height:"24"}))),c.createElement("g",{transform:"translate(11)"},c.createElement("mask",{id:"c",fill:"white"},c.createElement("use",{xlinkHref:"#a"})),c.createElement("g",{fill:"#A7AAAD",mask:"url(#c)"},c.createElement("g",{transform:"translate(-9)"},c.createElement("rect",{width:"24",height:"24"}))))));n(344);const za=e=>{const{icon:t,label:n,checked:a,styles:r,onChange:o}=e;return c.createElement("div",{className:"form-check checkbox",style:r},c.createElement("input",{id:n,type:"checkbox",className:"form-check-input",checked:a,onChange:()=>o(n)}),c.createElement("label",{className:"form-check-label",htmlFor:n},void 0!==t&&c.createElement("i",{className:"chi-flag mr-1"}),c.createElement("span",null,n)))},Za=e=>{const{type:t,title:n,className:a,styles:r}=e;return c.createElement(t,{className:a,style:r},n)},er=e=>c.createElement("span",{className:"label label-warning ml-2"},e.name),tr=e=>{const{selected:t,groupValueKey:n,value:a,index:r,border:o,onClick:l}=e;return c.createElement("button",{type:"button",onClick:function(e){return e.preventDefault(),l(n,r),!1},className:t?`btn btn-secondary btn-sm selected ${o}`:`btn btn-secondary btn-sm ${o}`},a)};n(345);const nr=e=>{const{name:t,tooltipKey:n,groupValueKey:a,values:r,onClick:o}=e;return c.createElement("div",{className:"selection-box-container"},c.createElement("div",{className:"selection-box-heading"},c.createElement("span",null,t),void 0!==n&&c.createElement(E.a,{tooltipContent:c.createElement(Sr,{tooltipKey:n}),showArrow:!1,position:"bottom"},c.createElement("div",{className:"ml-1 h5 body-1"},c.createElement("i",{className:"chi-help-circle-filled"})))),c.createElement("div",{className:"selection-box mb-2"},r.map(({value:e,selected:t},n)=>{const l=2===r.length&&0===n?"border-right":"";return c.createElement(tr,{key:`${e}-${n}`,selected:t,groupValueKey:a,value:e,index:n,border:l,onClick:o})})))},ar=e=>{const{itemsSpaceBetween:t,tooltips:n,groupValues:a,onClick:r}=e,o=`scoring-container ${t?"space-between":"fixed-space"}`;return c.createElement("div",{className:o},Object.keys(a).map(e=>{const{name:t,values:o}=a[e],l=void 0!==n&&n.includes(e)?e:void 0;return c.createElement(nr,{key:`${e}-${t}`,groupValueKey:e,name:t,tooltipKey:l,values:o,onClick:r})}))};class rr extends c.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){const{errorDesc:e="Something went wrong. Please refresh the page.",headingLevel:t,headerClass:n,isCentered:a,className:r}=this.props,o=`${n||""}${a?" text-center":""}${r?` ${r}`:""}`;return this.state.hasError&&t?c.createElement(Za,{type:t,className:o,title:e}):this.state.hasError&&!t?c.createElement("p",{className:`text-alternative-danger-red ${o}`},e):this.props.children}}const or=e=>{const{align:t="center",size:n="md",marginTop:a}=e,r=void 0!==a?`mt-${a}`:"";return c.createElement("div",{className:`text-${t} ${r} ml-1`},c.createElement("i",{className:`chi-simple-spinner spinner spinner-${n}`}))},lr="dok",sr="difficulty",ir="DOK",cr="Difficulty",ur=[lr,sr],dr="Easy",mr="Medium",pr="Hard",Er="UPDATE_SCORING",gr="RESET",hr="Something went wrong. Please refresh the page to attempt to load the Taxonomy section again.",fr=c.memo((function(e){const{PATH_SOLUTION:t}=a,{setFieldValue:n}=e,[{scoring:r},o]=Object(Ka.a)(wr,br(vr,e));c.useEffect(()=>{const e=null!==r.dok.selectedIndex?+r.dok.values[r.dok.selectedIndex].value:null,a=null!==r.difficulty.selectedIndex?r.difficulty.values[r.difficulty.selectedIndex].value:null;n(`${t}.${lr}`,e),n(`${t}.${sr}`,a)},[r.dok,r.difficulty,n,t]);const l=c.useCallback((e,t)=>{Cr(e,t,o)},[o]);return c.createElement("div",{className:"pt-4"},c.createElement(Za,{type:"h2",title:"Taxonomy",className:"h6 mb-1"}),c.createElement(ar,{groupValues:r,tooltips:ur,onClick:l}))})),br=(e,t)=>{const{containsArt:n,setFieldValue:a,...r}=t;return{scoring:Hr(e.scoring,r)}},vr={scoring:{[lr]:{name:ir,selectedIndex:null,values:ba(4,{value:1,selected:!1})},[sr]:{name:cr,selectedIndex:null,values:[{value:dr,selected:!1},{value:mr,selected:!1},{value:pr,selected:!1}]}}},wr=(e,t)=>{switch(t.type){case gr:return vr;case Er:return Vr(e,t);default:t.type;throw new Error(`Unhandled action type: ${t.type}`)}},Cr=(e,t,n)=>{try{n({type:Er,payload:{key:e,nextIndex:t}})}catch(e){throw new Error(`An error occurred in 'handleScoringClick': ${e}`)}},yr=()=>c.createElement("div",{className:"tooltip-content"},c.createElement("p",null,c.createElement("strong",null,"1. Recall/Reproduction")," - Recall a fact, information, or procedure. Process information on a low level."),c.createElement("p",null,c.createElement("strong",null,"2. Skills/Concepts")," - Use information or conceptual knowledge, two or more steps."),c.createElement("p",null,c.createElement("strong",null,"3. Strategic Thinking")," - Requires reasoning, developing a plan or a sequence of steps. some complexity."),c.createElement("p",null,c.createElement("strong",null,"4. Extended Thinking")," - Requires an investigation, time to think and process multiple conditions of the problem.")),Nr=()=>c.createElement("div",{className:"tooltip-content"},c.createElement("p",null,c.createElement("strong",null,"Easy")," - Most students would not struggle to answer the question. Demonstrate basic knowledge of the concept."),c.createElement("p",null,c.createElement("strong",null,"Medium")," - Most students would spend a reasonable amount of effort to answer the question. Demonstrate an intermediate knowledge of the concept."),c.createElement("p",null,c.createElement("strong",null,"Hard")," - Most students would be expected to struggle to answer the question, or require multiple attempts. Demonstrate mastery or advanced knowledge of the concept."));n(346);const Sr=e=>{switch(e.tooltipKey){case i.DOK_KEY:return c.createElement(yr,null);case i.DIFFICULTY_KEY:return c.createElement(Nr,null);default:return null}};n(347);var xr=n(18);const Tr=(e,t)=>(e.qcStatus=t,e),Or=c.memo((function(e){const{PATH_SOLUTION:t}=a,{sourceId:n,sourceType:r,setFieldValue:o}=e,[l,s]=Object(Ka.a)(Rr,Ir),[i,u]=c.useState(kr),d=!Object(c.useContext)(Ve).rights.find(e=>e===_.CAN_POST_REVIEW),[m,p]=c.useState(!0),{loading:E,response:g}=i,{readyToPublish:h,copyright:f,prevCopyright:b,scoring:v,qcStatus:w}=l;c.useEffect(()=>{const e=`${t}.review.`,n=null!==v.correctness.selectedIndex?$r(ya,v.correctness.values[v.correctness.selectedIndex].value):null,a=null!==v.learning.selectedIndex?+v.learning.values[v.learning.selectedIndex].value:null,r=null!==v.style.selectedIndex?+v.style.values[v.style.selectedIndex].value:null,l=null!==v.grammar.selectedIndex?+v.grammar.values[v.grammar.selectedIndex].value:null;o(`${t}.isPublished`,h),o(`${t}.${_a}`,f),o(`${t}.${Da}`,b),o(`${t}${La}`,w),o(`${e}${ya}`,n),o(`${e}${Na}`,a),o(`${e}${Sa}`,r),o(`${e}${xa}`,l)},[h,f,b,w,v,o,t]),c.useEffect(()=>{E||s({type:Ga,payload:{reviewResponse:g}})},[E,g,s]),c.useEffect(()=>{""!==n&&""!==r?Lr(n,r,u):u(kr)},[n,r,s]);const C=c.useCallback((e,t)=>{Pr(e,t,s)},[s]),y=c.useCallback(e=>{_r(e,s)},[s]),N=c.useCallback(e=>{Dr(e.currentTarget.value,s)},[s]);return c.createElement("form",{className:"review-section mt-4 p-4 bg-neutral-400"},c.createElement("fieldset",{disabled:d},c.createElement("div",{className:"scoring-content"},c.createElement("div",{className:"scoring-header mb-1"},c.createElement(Za,{type:"h2",title:"Review",className:"h6"}),c.createElement(er,{name:"Reviewer only"})),E?c.createElement(or,null):c.createElement(c.Fragment,null,c.createElement(ar,{itemsSpaceBetween:!0,groupValues:v,onClick:C}),c.createElement("div",{className:"scoring-controls"},c.createElement("div",null,c.createElement(za,{label:ka,checked:h,onChange:y}),c.createElement(za,{icon:"chi-flag",label:Ra,checked:f,styles:{marginTop:"2rem"},onChange:y})),c.createElement("div",{className:"scoring-action-buttons"},c.createElement("button",{className:"btn btn-tertiary",onClick:()=>s({type:"RESET",payload:{}})},"Clear"))),c.createElement("div",{className:"qc-dropdown"},c.createElement("select",{className:"form-select col-12 mt-2",value:""!=w?w:oe,name:"qcStatus",onChange:N},c.createElement("option",{className:"dropdown-item",value:oe},"Not QCed"),c.createElement("option",{className:"dropdown-item",value:re},"QC Pass"),c.createElement("option",{className:"dropdown-item",value:ne},"QC Failed - Fix Needed"),c.createElement("option",{className:"dropdown-item",value:ae},"QC Failed - Fix Not Needed"))),c.createElement("div",null,c.createElement("button",{type:"button",className:"btn btn-secondary btn-sm mt-2",disabled:!m,onClick:()=>{Ut.markAsReviewed(n,r).then(()=>{p(!1)}).catch(()=>{p(!0)})}},"Mark as Reviewed"))))))})),Ir={[Pa]:!1,[_a]:!1,[Da]:!1,[La]:"",scoring:{[ya]:{name:Ta,selectedIndex:null,values:[{value:$a,selected:!1},{value:Ma,selected:!1}]},[Na]:{name:Oa,selectedIndex:null,values:ba(3,{value:1,selected:!1})},[Sa]:{name:Ia,selectedIndex:null,values:ba(3,{value:1,selected:!1})},[xa]:{name:Aa,selectedIndex:null,values:ba(3,{value:1,selected:!1})}}},Ar={[ya]:null,[Na]:null,[Sa]:null,[xa]:null,[_a]:!1,[Pa]:!1,[La]:""},kr={loading:!1,error:!1,response:Ar},Rr=(e,t)=>{switch(t.type){case Wa:return Ir;case Ga:const{reviewResponse:n}=t.payload;if(void 0===n)throw new Error('"reviewResponse" is required on the payload of this action.');const{copyright:a,qcStatus:r,readyToPublish:o,...l}=n;return{readyToPublish:o,scoring:Hr(Ir.scoring,l),copyright:a,prevCopyright:a,qcStatus:r};case ja:case Ha:return Wr(e,t,Xa);case Va:return Vr(e,t);case Qa:return((e,t)=>{const{qcStatus:n}=t.payload;if(void 0===n)throw new Error("`qcStatus` is required in the payload of this action.");return Object(xr.b)(e)?Tr(e,n):Object(xr.c)(e=>Tr(e,n))(e)})(e,t);default:t.type;throw new Error(`Unhandled action type: ${t.type}`)}},Pr=(e,t,n)=>{try{n({type:Va,payload:{key:e,nextIndex:t}})}catch(e){throw new Error(`An error occurred in 'handleScoringClick': ${e}`)}},_r=(e,t)=>{try{t({type:Ba[e],payload:{checkboxLabel:e}})}catch(e){throw new Error(`An error occurred in 'handleCheckboxToggle': ${e}`)}},Dr=(e,t)=>{try{t({type:Qa,payload:{qcStatus:e}})}catch(e){throw new Error(`An error occurred in 'handleDropdownUpdate': ${e}`)}},Lr=async(e,t,n)=>{const a=`${wa}?questionCode=${e}`,r=`${va}?sourceType=${t}&sourceId=${e}`;try{n({loading:!0});const[e,t]=await Promise.all([fetch(r).then(e=>e.json()),fetch(a).then(e=>e.json())]);n({loading:!1,response:qr(e,t)})}catch(e){n({error:e,loading:!1})}},qr=(e,t)=>{if(!1===e)return{...Ar,readyToPublish:t};const{copyright:n,correctness:a,learning:r,style:o,grammar:l,qcStatus:s}=e;return{readyToPublish:t,copyright:fa(n,!1),qcStatus:fa(s,""),correctness:fa(a,null),learning:fa(r,null),style:fa(o,null),grammar:fa(l,null)}},$r=(e,t)=>{switch(e){case ya:if(t===$a)return Fa;if(t===Ma)return Ua;default:return t}},{YES:Mr,NO:Ur,CORRECTNESS_KEY:Fr,CORRECTNESS_VALUE_0_SELECTED:Gr,CORRECTNESS_VALUE_1_SELECTED:jr}=s,Hr=(e,t)=>{return Object.keys(e).reduce((n,a)=>{const{name:r,values:o}=e[a];let l=null;const s=(e,t,n)=>{const{selectedValues:a,index:r}=n;if(e===Fr)switch(t){case Mr:return a[e]===jr&&(l=r,!0);case Ur:return a[e]===Gr&&(l=r,!0);default:return l=null,!1}return null!==a[e]&&void 0!==a[e]&&(t===a[e].toString()&&(l=r,!0))},i=o.map(({value:e},n)=>({value:e,selected:s(a,e,{selectedValues:t,index:n})}));return n[a]={name:r,selectedIndex:l,values:i},n},{})},Vr=(e,t)=>{const{key:n,nextIndex:a}=t.payload;if(void 0===n||void 0===a)throw new Error("`key` and `nextIndex` are required in the payload of this action.");return Object(xr.b)(e)?Qr(e,n,a):Object(xr.c)(e=>Qr(e,n,a))(e)},Qr=(e,t,n)=>{const{selectedIndex:a,values:r}=e.scoring[t];return null!==a?a===n?(r[a].selected=!1,e.scoring[t].selectedIndex=null):(r[a].selected=!1,r[n].selected=!0,e.scoring[t].selectedIndex=n):(r[n].selected=!0,e.scoring[t].selectedIndex=n),e},Wr=(e,t,n)=>{const{checkboxLabel:a,checkboxValue:r}=t.payload;if(void 0===a)throw new Error("`checkboxLabel` is required in the payload of this action.");return Object(xr.b)(e)?Xr(e,n,{checkboxLabel:a,checkboxValue:r}):Object(xr.c)(e=>Xr(e,n,{checkboxLabel:a,checkboxValue:r}))(e)},Xr=(e,t,n)=>{const{checkboxLabel:a,checkboxValue:r}=n,o=t[a];return e[o]=void 0!==r?r:!e[o],e};n(116);var Br=e=>{const{answerIdentifier:t,onUpdateIdentifier:n,index:a}=e;return c.createElement(c.Fragment,null,c.createElement("input",{type:"text",className:"form-control pqa-auth-id-input","data-testid":`identifier-input-${a}`,value:t,onChange:n}))};var Jr=e=>{const{path:t,answer:n}=e,a=Object(g.e)();return c.createElement("div",{className:"pqa-auth-isCorrect-form form-check mx-auto"},c.createElement("input",{name:`${t}.isCorrect`,id:`${t}-isCorrect-checkbox`,type:"checkbox",className:"form-check-input",checked:n.isCorrect,onChange:a.handleChange}),c.createElement("label",{className:"form-check-label",htmlFor:`${t}-isCorrect-checkbox`},c.createElement("span",{className:"sr-only"},"Mark answer ",n.answerIdentifier," as correct")))};var Kr=e=>{const{identifier:t,onRemove:n}=e;return c.createElement(c.Fragment,null,c.createElement("button",{className:"btn btn-tertiary btn-icon",onClick:n},c.createElement("i",{className:"chi-remove"}),c.createElement("span",{className:"sr-only"},"Delete answer ",t)))};var Yr=e=>{const{path:t,index:n,answer:r,hasDragIcon:o,options:{identifier:l,explanation:s,isCorrect:i,remove:u},onRemove:d,loadedQuestionCode:m}=e,p=Object(c.useContext)(ts);return c.createElement(c.Fragment,null,o&&c.createElement("td",null,c.createElement(Ya,null)),l&&c.createElement("td",null,c.createElement(Br,{answerIdentifier:r.answerIdentifier,onUpdateIdentifier:e=>{p.setValue(`${a.PATH_SOLUTION}.idType`,le.CUSTOM),p.setValue(`${t}.answerIdentifier`,e.currentTarget.value)},index:n})),s&&c.createElement("td",null,r.explanations.map((e,n)=>c.createElement(Bn,{key:`${m}-${n}`,widgets:e.widgets,path:`${t}.explanations[${n}].widgets`}))),i&&c.createElement("td",null,c.createElement(Jr,{answer:r,path:t})),u&&c.createElement("td",null,c.createElement(Kr,{identifier:r.answerIdentifier,onRemove:d})))};function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Zr=e=>{const{answers:t,options:n,path:a,arrayHelpers:r,onRemove:l,loadedQuestionCode:s}=e,i=Object(c.useContext)(ts);return c.createElement(ta.a,{onDragEnd:o.handleDragEnd(r,i.setValue)},c.createElement(ta.c,{droppableId:"answers-droppable"},({droppableProps:e,innerRef:r,placeholder:o})=>c.createElement("tbody",zr({ref:r},e),t.map((e,t)=>c.createElement(ta.b,{key:`${e.answerIdentifier}-${t}`,draggableId:`${e.answerIdentifier}-${t}`,index:t},({draggableProps:r,dragHandleProps:o,innerRef:i})=>{const u={...r,...o};return c.createElement("tr",zr({ref:i},u,{"data-testid":`answer-${Xe(a+"["+t+"]")}`}),c.createElement(Yr,{answer:e,options:n,path:`${a}[${t}]`,index:t,hasDragIcon:!0,onRemove:()=>l(t),loadedQuestionCode:s}))})),o)))};var eo=e=>{const{solutionIdType:t,answers:n,path:a,options:r,hasDragDropGrid:o,createAnswer:l,loadedQuestionCode:s}=e,{identifier:i,explanation:u,isCorrect:d,remove:m}=r,p=c.useContext(ts);function E(e){let r=de(t,kt(n,e,1));p.setValue(a,r),me(t,r,p)}return c.createElement(g.b,{name:a},e=>c.createElement(c.Fragment,null,c.createElement("table",{className:"pqa-auth-answers-table table table-borderless table-non-striped w-100 mt-2"},c.createElement("thead",{className:"pqa-auth-table-header"},c.createElement("tr",null,o&&c.createElement("th",{className:"pqa-auth-answer-order-col"},"Answer order"),i&&c.createElement("th",{className:"pqa-auth-id-col"},"Answer choice"),u&&c.createElement("th",{className:"pqa-auth-expl-col"},"Explanation"),d&&c.createElement("th",{className:"pqa-auth-isCorrect-col"},"Correct"),m&&c.createElement("th",{className:"pqa-auth-remove-col"}))),o?c.createElement(Zr,{answers:n,options:r,path:a,arrayHelpers:e,onRemove:E,loadedQuestionCode:s}):c.createElement("tbody",null,n.map((e,t)=>c.createElement("tr",{key:`${e.answerIdentifier}-${t}`,"data-testid":`answer-${Xe(a+"["+t+"]")}`},c.createElement(Yr,{answer:e,options:r,path:`${a}[${t}]`,index:t,onRemove:()=>E(t),loadedQuestionCode:s}))))),c.createElement("button",{className:"btn btn-secondary btn-sm px-8 mx-auto d-block",onClick:()=>{!function(e){let a=l();a.answerIdentifier=ue(t,n.length,a.answerIdentifier),e.push(a)}(e)}},"Add answer option")))};var to=e=>{const{path:t,type:n,idType:a,answers:r,loadedQuestionCode:o}=e,l=c.useContext(ts);return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(ea,{types:[le.LOWERCASE,le.UPPERCASE,le.NUMERIC,le.CUSTOM],selected:a,onChange:function(e){pe(e.currentTarget.value,r,l)}}),c.createElement(eo,{solutionIdType:a,answers:r,options:{identifier:!0,explanation:!0,isCorrect:!0,remove:!0},path:t,createAnswer:function(){return n===y.MCQ?Ae():Re()},loadedQuestionCode:o}))};n(382);function no(e){const{answers:t,path:n}=e,a=Object(c.useContext)(ts);return c.createElement(c.Fragment,null,c.createElement("label",null,"Correct Option"),c.createElement("div",{className:"is-correct-toggle"},t.map((e,t)=>c.createElement("button",{className:"btn btn-secondary btn-sm"+(e.isCorrect?" active":""),key:e.answerIdentifier+t,onClick:()=>{!function(e,t){let r="0"===t?"1":"0",o=!e.isCorrect;a.setValue(`${n}[${t}].isCorrect`,o),a.setValue(`${n}[${r}].isCorrect`,!o)}(e,t.toString())}},e.answerIdentifier))))}n(383);function ao(e){const{answers:t,path:n,idType:a}=e,r=Object(c.useContext)(ts);let o=t[0];return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement("div",{className:"row align-items-center tcq-answer-id-container"},c.createElement("div",{className:"col-12 col-md-3"},c.createElement(ea,{types:[le.BOOLEAN,le.CUSTOM],selected:a,onChange:function(e){let t=e.currentTarget.value,a=t===le.BOOLEAN?["True","False"]:["",""];r.setValue(`${n}[0].answerIdentifier`,a[0]),r.setValue(`${n}[1].answerIdentifier`,a[1]),r.setValue(`${D}.idType`,t)}})),c.createElement("div",{className:"form-group d-inline-block pl-2 mb-0"},c.createElement(no,{answers:t,type:a,path:n})),a!==le.CUSTOM?null:t.map((e,t)=>c.createElement("div",{className:"form-group d-inline-block mb-0 pl-2",key:t},c.createElement("label",null,"Option ",t+1),c.createElement(g.a,{name:`${n}[${t}].answerIdentifier`,className:"form-control"})))),c.createElement(zn,{answer:o,answerPath:`${n}[0]`,path:`${n}[0].explanations`}))}n(384);var ro=n(210);function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function lo(e){const{widget:t,path:n}=e,a=c.useContext(ts);let r="";if(""!==t.text){let e=/\/solutions\/attachments\/\d+\//,n=!!t.text&&t.text.match(e);n&&n.length>0&&(r=n[0])}const[o,l]=Object(c.useState)(r),[s,i]=Object(c.useState)(""===t.text);function u(e,t,r){var o;o=e,a.setValue(`${n}.text`,o),i(t),l(r)}let d,m;return s?(d=c.createElement(c.Fragment,null,c.createElement("p",null,"Upload SVG image from"),c.createElement(ro.a,{accept:"image/svg+xml",onDrop:function(e){let t=e[0];if(t){a.setValue("exercise.error",[""]);let e=new FormData;e.append("file",t),Ut.uploadAttachment(e).then(e=>{u(`<img src="${e}"/>`,!1,e)}).catch(e=>{let t;try{t=JSON.parse(e.response)}catch(e){t=null}ia(t,"Something went wrong while saving your image. Please try again.",a.setValue)})}},disabled:!1},({getRootProps:e,getInputProps:t})=>c.createElement("div",oo({className:"d-inline-block mt-1"},e()),c.createElement("input",t()),c.createElement("button",{className:"btn btn-secondary btn-sm"},c.createElement("i",{className:"chi-computer-screen ml-0 mr-1"}),c.createElement("span",null,"Your computer"))))),m=null):(d=null,m=o?c.createElement("div",{className:"imageContainer position-relative"},c.createElement("img",{src:o}),c.createElement("button",{className:"btn btn-secondary btn-icon position-absolute m-1 removeIcon",onClick:function(){u("",!0,"")}},c.createElement("i",{className:"chi-bin fa-trash-o"}))):null),c.createElement(c.Fragment,null,d,m)}function so(e){const{answer:t,path:n}=e,a=t&&t.widgets&&t.widgets[0];let r=a.text?c.createElement(Ct,{answer:t,path:n}):null;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(lo,{widget:a,path:`${n}.widgets[0]`}),r,c.createElement(zn,{answer:t,answerPath:n,path:`${n}.explanations`}))}function io(e){const{answer:t,path:n}=e;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Sample response"),c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`}),c.createElement("h2",{className:"h6 mt-4 mb-1"},"Explanation"),c.createElement(Bn,{widgets:t.explanations[0].widgets,path:`${n}.explanations[0].widgets`}))}function co(e){const{index:t,onRemoveAnswer:n}=e;return c.createElement("div",{className:"pqa-blank-remove col-md-1 text-right"},c.createElement("button",{className:"btn btn-tertiary btn-icon wa",onClick:n},c.createElement("i",{className:"chi-remove"}),c.createElement("span",{className:"sr-only"},"Delete Blank #",t)))}function uo(e){const{answer:t,path:n,index:a,onRemoveAnswer:r}=e;return c.createElement("div",{className:"pqa-fib-blank-container mt-2"},c.createElement("label",{htmlFor:""},"Blank #",a),c.createElement("div",{className:"pqa-fib-answer row align-items-center"},c.createElement("div",{className:"col-md-11"},c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`})),c.createElement(co,{index:a,onRemoveAnswer:r})))}function mo(e){const{answer:t,path:n,index:a,onRemoveAnswer:r}=e;return c.createElement("div",{className:"pqa-fib-blank-container mt-2"},c.createElement("div",{className:"row mb-1 align-items-center"},c.createElement("div",{className:"pqa-fib-blank-heading caption col-md-11"},"Blank #",a),c.createElement(co,{index:a,onRemoveAnswer:r})),c.createElement("div",{className:"pqa-fib-answer"},c.createElement("label",{htmlFor:""},"Answer"),c.createElement("div",{className:"col pl-0"},c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`}))),c.createElement("div",{className:"pqa-fib-explanation mt-1"},c.createElement("label",{htmlFor:""},"Explanation"),c.createElement("div",{className:"col pl-0"},c.createElement(Bn,{widgets:t.explanations[0].widgets,path:`${n}.explanations[0].widgets`}))))}function po(e){const{path:t,solution:n}=e,r=Object(c.useContext)(ts);let[o,l]=Object(c.useState)(n.hasSameExplanationForAllAnswers?v.MULTIPLE_PER_EXPLANATION:v.ONE_PER_ANSWER);return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer and explanation"),c.createElement("div",{className:"pqa-fib-type-selector row"},c.createElement("div",{className:"col-md-4"},c.createElement("label",{htmlFor:""},"Format"),c.createElement(St.a,{screenReaderLabel:"Selected answer format for Fill-in-the-Blank Question",selectedItem:{text:o,value:o},onSelect:e=>{e&&function(e){let t=e;l(t);let o=Oe(n,t);r.setValue(a.PATH_SOLUTION,o)}(e.value)}},c.createElement(St.d,null),c.createElement(St.c,null,Object.values(v).map((e,t)=>c.createElement(St.b,{key:e,index:t,item:{text:e,value:e}})))))),c.createElement(g.b,{name:`${t}.answers`},e=>c.createElement(c.Fragment,null,c.createElement("div",{className:"pqa-fib-answers-container"},n.answers.map((n,a)=>o===v.ONE_PER_ANSWER?c.createElement(mo,{key:a,answer:n,path:`${t}.answers[${a}]`,index:(a+1).toString(),onRemoveAnswer:()=>e.remove(a)}):c.createElement(uo,{key:a,answer:n,path:`${t}.answers[${a}]`,index:(a+1).toString(),onRemoveAnswer:()=>e.remove(a)}))),c.createElement("button",{className:"btn btn-secondary btn-sm mt-2 px-10 mx-auto d-block",onClick:()=>e.push(ge(y.FIB,[he()]))},"Add blank"))),o!==v.ONE_PER_ANSWER&&n.answers.length>0?c.createElement("div",{className:"pqa-fib-explanation mt-2"},c.createElement("label",{htmlFor:""},"Explanation"),c.createElement(Bn,{widgets:n.answers[0].explanations[0].widgets,path:`${t}.answers[0].explanations[0].widgets`,onChange:function(e,a){let[o,...l]=n.answers,s=function(e){let t={[w.SOLUTIONS]:We(e,w.SOLUTIONS),[w.ANSWERS]:We(e,w.ANSWERS),[w.STEPS]:-1,[w.EXPLANATIONS]:-1,[w.WIDGETS]:We(e,w.WIDGETS)};const n=e.match(new RegExp(w.EXPLANATIONS,"g"));return n&&n.length>1?(t[w.STEPS]=We(e,w.EXPLANATIONS),t[w.EXPLANATIONS]=We(e.substring(e.indexOf(w.EXPLANATIONS)+n.length),w.EXPLANATIONS)):t[w.EXPLANATIONS]=We(e,w.EXPLANATIONS),t}(a)[w.WIDGETS];if(-1===s||!("widgets"in o.explanations[0]))throw new Error("Could not set explanation");let i=kt(o.explanations[0].widgets,s,1,e);l.forEach((e,n)=>{r.setValue(`${t}.answers[${n+1}].explanations[0].widgets`,i)})}})):null)}function Eo(e){const{answer:t,path:n}=e;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`}),c.createElement(Ct,{answer:t,path:n}),c.createElement(zn,{answer:t,answerPath:n,path:`${n}.explanations`}))}var go=Eo;function ho(e){const{answer:t,path:n}=e;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`,isSingleWidget:!0}),c.createElement(Ct,{answer:t,path:n}),c.createElement(zn,{answer:t,answerPath:n,path:`${n}.explanations`}))}var fo=e=>{const{path:t,idType:n,answers:a,loadedQuestionCode:r}=e,o=c.useContext(ts);return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(ea,{types:[le.LOWERCASE,le.UPPERCASE,le.NUMERIC,le.CUSTOM],selected:n,onChange:function(e){pe(e.currentTarget.value,a,o)}}),c.createElement(eo,{solutionIdType:n,answers:a,options:{identifier:!0,explanation:!0,isCorrect:!1,remove:!0},path:t,hasDragDropGrid:!0,createAnswer:Ie,loadedQuestionCode:r}))};var bo=e=>{const{path:t,idType:n,answers:a,loadedQuestionCode:r}=e,o=c.useContext(ts);return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(ea,{types:[le.LOWERCASE,le.UPPERCASE,le.NUMERIC,le.CUSTOM],selected:n,onChange:e=>{pe(e.currentTarget.value,a,o)}}),c.createElement(eo,{solutionIdType:n,answers:a,options:{identifier:!0,explanation:!0,isCorrect:!1,remove:!0},path:t,hasDragDropGrid:!0,createAnswer:_e,loadedQuestionCode:r}))};const vo=c.createContext(void 0),wo=c.createContext(void 0),Co=e=>{const[t,n]=c.useReducer(No,yo);return c.createElement(vo.Provider,{value:t},c.createElement(wo.Provider,{value:n},e.children))},yo={value:""},No=(e,t)=>{switch(t.type){case"UPDATE_INPUT_VALUE":return{...e,value:t.value};case"RESET":return{value:""};default:t.type;throw new Error(`Unhandled action type: ${t.type}`)}},So=()=>{const e=c.useContext(wo);if(void 0===e)throw new Error("useMenuDispatch must be used within an InputMenuProvider");return e},xo=e=>{const{id:t,label:n,pills:a,...r}=e;return c.createElement("div",{className:"pill","data-testid":"pill",role:"listitem"},c.createElement("div",{className:"pill-content"},c.createElement("span",{"aria-label":"Pill value",className:"pill-value","data-testid":`pill-value-${n}`},n),c.createElement("span",{role:"button","data-testid":"pill-delete-button","aria-label":"Delete pill button",className:"pill-delete-button",onClick:To(a,t,r)},"×")))},To=(e,t,n)=>()=>{const{pillKey:a,setPills:r,onPillChange:o}=n,l=e.slice();let s={};for(let e=0;e<l.length;++e)if(l[e].id===t||l[e].key===a){s=l.splice(e,1)[0];break}r(()=>(void 0!==o&&o(l,{removed:s}),l))};function Oo(){return(Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Io=e=>c.createElement("div",{className:"pills",role:"list","aria-label":"List of pills","data-testid":"pills-grid"},e.pills.map(({id:t,key:n,label:a})=>{const r={...e,id:t,label:a,pillKey:n};return c.createElement(xo,Oo({key:t||n},r))}));var Ao=n(77),ko=n(51);const Ro=e=>c.createElement("ul",{className:"menu-dropdown","data-testid":"input-menu"},c.createElement("li",{"data-menu-item-id":"default","data-menu-item-value":"default",className:"menu-dropdown-item"},e.defaultMenuItemDesc));var Po=n(206);const _o=e=>{const t=So(),{option:n,optionKey:a,setPills:r,onPillChange:o}=e,l=n.id,s=Lo(n,a);return c.createElement("li",{"data-menu-item-id":l,"data-menu-item-value":s,"data-testid":`menu-item-${s}`,className:"menu-dropdown-item",onClick:Do(t,l,{setPills:r,onPillChange:o})},s)},Do=(e,t,n)=>a=>{const{setPills:r,onPillChange:o}=n,l=a.target.innerText,s={id:t,key:Object(ko.a)(l),label:l};r(e=>{const t=Object(Ao.a)([...e,s],"key");return void 0!==o&&o(t,{added:s}),t}),e({type:"UPDATE_INPUT_VALUE",value:""})},Lo=(e,t)=>{if(void 0!==t&&Object(Po.a)(e))return e[t];if("string"==typeof e)return e;throw new TypeError("Invalid option provided to MenuItem")},qo=c.memo(e=>{const{inputMenu:t,setPills:n}=e,{options:a=[],key:r="",defaultMenuItemDesc:o="No items to show"}=t;return 0===a.length?c.createElement(Ro,{defaultMenuItemDesc:o}):c.createElement("ul",{className:"menu-dropdown","data-testid":"input-menu"},a.map((t,a)=>c.createElement(_o,{key:`${void 0!==t.id?t.id:""}-${a}`,option:t,optionKey:r,setPills:n,onPillChange:e.onPillChange})))});function $o(){return($o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}qo.displayName="Menu";const Mo=e=>{const t=(()=>{const e=c.useContext(vo);if(void 0===e)throw new Error("useMenuState must be used within an InputMenuProvider");return e})(),n=So(),{autocomplete:a,inputMenu:r,setPills:o,hideMenuIfEmpty:l,shouldFocus:s=!1}=e;let i=!0;return l&&0===(null==r?void 0:r.options.length)&&(i=!1),c.createElement("div",{className:"input-dropdown-container"},c.createElement("input",$o({autoFocus:s},Qo({...e,node:{prev:null,curr:null,currId:null,currValue:""},state:t,dispatch:n,inputMenu:r}))),i&&Fo(a,r,{setPills:o,onPillChange:e.onPillChange}))},Uo={9:"TAB",13:"ENTER",8:"BACKSPACE"},Fo=(e,t,n)=>{const{setPills:a,onPillChange:r}=n;return e&&t&&t.isOpen?c.createElement(qo,{inputMenu:t,setPills:a,onPillChange:r}):null},Go=e=>t=>{const{pills:n,dispatch:a,onInputChange:r}=e,{value:o}=t.target;if(a({type:"UPDATE_INPUT_VALUE",value:o}),void 0!==r){r(n,{inputElValue:o,added:null,removed:null})}""===o&&a({type:"RESET",value:""})},jo=(e,t)=>n=>{const{autocomplete:a,onPillChange:r,onEscKeyPress:o,setPills:l,node:s,inputMenu:i={isOpen:!1,options:[]}}=t,c=n.which,u=n.target.value;if(a){if(i.isOpen&&0===i.options.length)return;const{currId:t,currValue:d}=Xo(c,s);Wo(c,""===d&&""!==u&&13!==c&&9!==c?u:d,{event:n,autocomplete:a,currId:t,onPillChange:r,onEscKeyPress:o,setPills:l,dispatch:e})}else Wo(c,u,{event:n,autocomplete:a,onPillChange:r,setPills:l,dispatch:e})},Ho=(e,t)=>n=>{n.preventDefault();const a=n.clipboardData.getData("text"),r=Ko(a)(Yo)(zo);e(e=>{const n=Object(Ao.a)([...e,...r],"key");if(void 0!==t){t(n,{inputElValue:a})}return n}),n.target.value=""},Vo=e=>{e.preventDefault()},Qo=e=>{const{autocomplete:t=!1,placeholder:n="",pills:a,setPills:r,onPillChange:o,onInputChange:l,onEscKeyPress:s,node:i,state:c,dispatch:u,inputMenu:d,overlayClassName:m}=e,p={value:c.value,placeholder:n,type:"text",className:"pills-input".concat(" ",null!=m?m:""),onKeyDown:jo(u,{autocomplete:t,node:i,inputMenu:d,setPills:r,onPillChange:o,onEscKeyPress:s}),"aria-label":"Pills input","data-testid":"pills-input"};return t?{...p,onPaste:Vo,onChange:Go({pills:a,dispatch:u,onInputChange:l})}:{...p,onPaste:Ho(r,o),onChange:Go({pills:a,dispatch:u,onInputChange:l})}},Wo=(e,t,n)=>{const{event:a,currId:r,autocomplete:o,onPillChange:l,onEscKeyPress:s,setPills:i,dispatch:c}=n;if(9!==e&&13!==e||""===t)8===e&&""===t?i(n=>{const{itemRemoved:a,nextList:r}=Jo(n);return void 0!==l&&l(r,{added:null,removed:a,keyPressed:Uo[e],inputElValue:t}),r}):o&&27===e&&void 0!==s&&(c({type:"RESET",value:""}),s());else{a.preventDefault();const n={id:void 0!==r?r:Object(ko.a)(t||void 0),key:Object(ko.a)(t||void 0),label:t};i(a=>{const r=Object(Ao.a)([...a,n],"key");return void 0!==l&&l(r,{added:n,removed:null,keyPressed:Uo[e],inputElValue:t}),r}),c({type:"RESET",value:""})}},Xo=(e,t)=>{const n=document.querySelector("ul.menu-dropdown");return 40===e&&(null===t.curr?(t.curr=n.querySelector(".menu-dropdown-item:first-child"),Bo(t)):(t.curr.classList.remove("selected"),t.prev=t.curr,t.curr=null===t.curr.nextSibling?t.curr:t.curr.nextSibling,Bo(t))),38===e&&null!==t.curr&&(t.curr.classList.remove("selected"),t.prev=t.curr,t.curr=null===t.curr.previousSibling?t.curr:t.curr.previousSibling,Bo(t)),t},Bo=e=>{e.currId=e.curr.getAttribute("data-menu-item-id"),e.currValue=e.curr.getAttribute("data-menu-item-value"),e.curr.className+=" selected",e.curr.scrollIntoView({behavior:"smooth",block:"end"})},Jo=(e=[])=>{const t=e.slice();return{itemRemoved:t.pop(),nextList:t}},Ko=e=>t=>n=>n(t(e)),Yo=e=>{if("string"!=typeof e)throw new TypeError('Argument "input" must be of type String.');const t=e.match(/[^\r\n]+/g);return null!==t&&t.length>1?t:(null===t||1!==t.length||e.includes(","))&&e.includes(",")?e.split(",").filter(Boolean):[e]},zo=e=>e.map(e=>({id:Object(ko.a)(e),key:Object(ko.a)(e),label:e.trim()})),Zo=e=>c.createElement("div",{"data-testid":"input-menu-spinner",className:"text-right",style:{margin:"auto 8px"}},c.createElement("i",{className:"chi-simple-spinner spinner spinner-sm"}));n(385);function el(){return(el=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const tl=Object(c.memo)((function(e){const{initialPills:t,pillToAppend:n,autocomplete:a,onPillChange:r,inputMenu:o={isLoading:!1}}=e,[l,s]=Object(c.useState)(t||[]);return Object(c.useEffect)(()=>{void 0!==n&&s(e=>(void 0!==r&&r([...e,n],{added:n}),[...e,n]))},[r,n]),c.createElement("div",{className:"pills-content-container"},c.createElement(Io,{pills:l,setPills:s,onPillChange:r}),e.hideMenu||c.createElement(Co,null,c.createElement(Mo,el({pills:l,setPills:s},e))),a&&o.isLoading&&c.createElement(Zo,null))}));function nl(e){const t=Object(c.useContext)(ts),{answer:n,path:a,onRemove:r}=e,o=yt(a)+1,l=n.options.map(e=>({id:e,key:e,label:e}));let s="",i="";return s=et("ClAnswer",y.CL),i=et("PillsInput",y.CL),c.createElement("div",{className:"cl-answer"},c.createElement("h6",{className:"mb-1 d-flex justify-content-between"},c.createElement("span",null,"Category #",o),c.createElement(d,{onClick:r,color:"tertiary",paddingClass:"p-0",size:"sm",isIconOnly:!0,additionalClasses:"float-right mr-4"},c.createElement("i",{className:"chi-remove"}))),c.createElement("div",{className:"form-group"},c.createElement("label",{htmlFor:""},"Category name"),c.createElement(g.a,{name:`${a}.groupName`,placeholder:s,className:"form-control"})),c.createElement("div",{className:"form-group"},c.createElement("label",{htmlFor:""},"Answer option(s)"),c.createElement("label",{className:"ml-1 legal text-neutral-700"},'Use "enter" key to separate each option'),c.createElement(tl,{initialPills:l,onPillChange:function(e){let n=e.map(e=>e.label);t.setValue(`${a}.options`,n)},placeholder:i})),c.createElement("div",{className:"form-group"},c.createElement("label",{htmlFor:""},"Explanation"),n.explanations.map((e,t)=>c.createElement(Bn,{key:t,widgets:e.widgets,path:`${a}.explanations[${t}].widgets`}))))}function al(e){const{answers:t,path:n}=e;return c.createElement(g.b,{name:n},e=>c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer and explanation"),t.map((t,a)=>c.createElement(nl,{key:`${t.type}-ans-${a}`,answer:t,path:`${n}[${a}]`,onRemove:()=>e.remove(a)})),c.createElement(d,{onClick:()=>e.push(Te()),color:"secondary",size:"sm",centered:!0},"Add group")))}function rl(e){const{answer:t,path:n}=e;return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mb-1"},"Answer"),c.createElement(Bn,{widgets:t.widgets,path:`${n}.widgets`,isSingleWidget:!0}),c.createElement(zn,{answer:t,answerPath:n,path:`${n}.explanations`}))}var ol=e=>{const{path:t,solution:{answers:n,idType:a,type:r},loadedQuestionCode:o}=e;return c.createElement(c.Fragment,null,function(r){switch(r){case y.MCQ:return c.createElement(to,{answers:n,idType:a,path:`${t}.answers`,type:y.MCQ,loadedQuestionCode:o});case y.ORD:return c.createElement(bo,{answers:n,idType:a,path:`${t}.answers`,type:y.ORD,loadedQuestionCode:o});case y.MS:return c.createElement(to,{answers:n,idType:a,path:`${t}.answers`,type:y.MS,loadedQuestionCode:o});case y.TCQ:return c.createElement(ao,{answers:n,path:`${t}.answers`,idType:a});case y.CALC:return c.createElement(Zn,{answer:n[0],path:`${t}.answers[0]`});case y.ES:return c.createElement(io,{answer:n[0],path:`${t}.answers[0]`});case y.SA:return c.createElement(Eo,{answer:n[0],path:`${t}.answers[0]`});case y.FIB:return c.createElement(po,{path:`${t}`,solution:e.solution});case y.DRW:return c.createElement(so,{answer:n[0],path:`${t}.answers[0]`});case y.MAT:return c.createElement(fo,{answers:e.solution.answers,idType:e.solution.idType,path:`${t}.answers`,loadedQuestionCode:o});case y.CL:return c.createElement(al,{answers:e.solution.answers,path:`${t}.answers`});case y.GR:return c.createElement(ho,{answer:e.solution.answers[0],path:`${t}.answers[0]`});case y.FF:return c.createElement(go,{answer:n[0],path:`${t}.answers[0]`});case y.LDGR:return c.createElement(rl,{answer:n[0],path:`${t}.answers[0]`})}}(r))};function ll(e){return c.createElement(c.Fragment,null,c.createElement("h2",{className:"h6 mt-4 mb-1"},"External link"),c.createElement("div",{className:"row"},c.createElement("div",{className:"col"},c.createElement(g.a,{name:e.path,type:"text",className:"form-control",placeholder:"Enter url (http://www... or www...)"}))))}function sl(e){const{path:t,text:n,loadedQuestionCode:a}=e;return c.createElement(c.Fragment,null,c.createElement("div",{className:"d-flex mt-4"},c.createElement("h2",{className:"h6"},"General comments"),c.createElement(E.a,{tooltipContent:"Leave notes or comments for the author or reviewer."},c.createElement("div",{className:"ml-1 h5 body-1"},c.createElement("i",{className:"chi-help-circle-filled"})))),c.createElement(ft,{text:n,path:t,key:`${a}-general-comments`}))}var il=n(395);n(386);const cl={mcq:!0,ms:!0,tcq:!0,calc:!1,gr:!1,ldgr:!1,cl:!0,mat:!0,ord:!0,drw:!1,es:!1,fib:!1,sa:!1,ff:!1};var ul=e=>{const{solution:t,path:n}=e,a=Object(c.useContext)(ts),r=c.useRef(null),o=c.useRef(null),[l,s]=c.useState(!1);c.useEffect(()=>{const e=e=>{if(r&&r.current&&r.current.contains(e.target))return e.stopPropagation(),void i();o&&o.current&&o.current.contains(e.target)||s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}});const i=()=>{s(!l)};let u=l?c.createElement("div",{ref:o,className:"row justify-content-end pqa-settings-menu-dropdown-container container"},c.createElement(il.a,{bordered:!0,elevated:!0,padding:{p:2},className:"pqa-settings-menu-dropdown col-4 offset-8"},c.createElement("div",{className:"row align-items-center"},c.createElement("span",{className:"form-toggle-text-label col-6"},"Scorable"),c.createElement("label",{className:"form-toggle-wrapper offset-4"},c.createElement("input",{type:"checkbox",onChange:e=>{const r=function(e,t){return{...t,isScorable:e}}(!t.isScorable,t);a.setValue(n,r)},checked:t.isScorable}),c.createElement("span",{className:"form-toggle-slider"}))))):null;return cl[t.type]?c.createElement(c.Fragment,null,c.createElement("div",{className:"row justify-content-end"},c.createElement("div",{className:"col-1"},c.createElement(gn.a,{ref:r,variant:"tertiary","aria-label":"Settings",size:"sm"},"Settings"))),u):null};var dl=e=>{const{path:t,solutionVersion:n,errorStrings:a,setFieldValue:r,solution:{sourceId:o,sourceType:l,generalComments:u,hints:d,externalLink:m,dok:p,difficulty:E,containsArt:g},loadedSourceId:h}=e;return c.createElement("div",{className:"pqa-author-answers-container pt-2 pb-4"},c.createElement(wt,{className:"text-alternative-danger-red",errors:a}),c.createElement(ul,{solution:e.solution,path:t}),c.createElement(ol,{solution:e.solution,path:t,loadedQuestionCode:h}),d&&c.createElement(bt,{hints:d,path:`${t}.hints`,loadedQuestionCode:h}),c.createElement(ll,{externalLink:m,path:`${t}.externalLink`}),c.createElement(rr,{isCentered:!0,headingLevel:"h3",className:"mt-4",errorDesc:i.ERROR_DESC},c.createElement(fr,{key:n,dok:p,difficulty:E,containsArt:g,setFieldValue:r})),c.createElement(sl,{text:u,path:`${t}.generalComments`,loadedQuestionCode:h}),c.createElement(rr,{isCentered:!0,headingLevel:"h3",className:"mt-4",errorDesc:s.ERROR_DESC},c.createElement(Or,{sourceId:o,sourceType:l,setFieldValue:r})))};const ml=e=>{const{id:t,message:n,type:a,shouldShow:r,onClose:o}=e;return c.createElement("div",{id:t,className:`prompt prompt-floater prompt-${a===R.ERROR?"danger":a}${r?" d-block":""}`},c.createElement("i",{className:"prompt-icon chi-infomation-circle-filled"}),c.createElement("div",{className:"prompt-heading"},a==R.SUCCESS?"Success!":"Error"),c.createElement("p",null,n),c.createElement("i",{className:"chi-remove prompt-close",onClick:o}))};var pl=n(398),El=n(208);var gl=class{static saveDraft(e,t,n){const a=JSON.stringify(n);!function(e,t){try{window.localStorage.setItem(e,t)}catch(e){return!1}}(this.getStorageKey(e,t),a)}static getDraft(e,t){return function(e,t=null){try{return window.localStorage.getItem(e)}catch(e){return t}}(this.getStorageKey(e,t))}static removeDraft(e,t){!function(e){try{window.localStorage.removeItem(e)}catch(e){return!1}}(this.getStorageKey(e,t))}static getStorageKey(e,t){return`author-draft:${e}:${t}`}};const hl=e=>{const t=Object(c.useRef)();return Object(c.useEffect)(()=>{t.current=e}),t.current},fl=n(387),bl=e=>{const{onSaveCb:t,formik:n}=e,[a,r]=Object(c.useState)(""),[o,l]=Object(c.useState)(""),[s,i]=Object(c.useState)(!1),[u,d]=Object(c.useState)(!1),[m,p]=Object(c.useState)(null),E=hl({formik:n}),g=Object(pl.a)(()=>{h(n.values).then(()=>i(!1),()=>i(!1))},300),h=e=>new Promise((n,r)=>{t(e),gl.saveDraft(a,o,e),p(gl.getDraft(a,o)),n("Success")});return Object(c.useEffect)(()=>{if(""!==a&&""!==o&&p(gl.getDraft(a,o)),void 0!==E&&((e,t)=>{const n=Object(El.a)(e.solutions[0]),a=Object(El.a)(t.solutions[0]);delete n.review,delete a.review,delete n.copyright,delete a.copyright,delete n.prevCopyright,delete a.prevCopyright,delete n.isPublished,delete a.isPublished;const r=n.sourceType,l=a.sourceType;delete n.sourceType,delete a.sourceType;const s=n.sourceId,i=a.sourceId;return delete n.sourceId,delete a.sourceId,delete n.solutionId,delete a.solutionId,delete n.version,delete a.version,a.type===y.TCQ&&void 0!==n.answers&&void 0!==a.answers&&(delete n.answers[1].explanations[0],delete a.answers[1].explanations[0]),i===o&&s===i&&r===l&&!fl(n,a)})(E.formik.values,n.values)&&""!==a&&""!==o){if(!n.isValid)return;i(!0),g()}},[n.values,n.isValid,o,E,g,a]),{userId:a,setUserId:r,loadedSourceId:o,setLoadedSourceId:l,isSaving:s,hasConflict:u,setHasConflict:d,isDraft:()=>s||null!==m,discardDraft:()=>{gl.removeDraft(a,o),p(null)},getDraftStr:e=>gl.getDraft(a,void 0!==e?e:o),getOutdatedDraftErrorMessage:(e,t)=>`${e}. This might be because you have an outdated draft version that can no longer be loaded. Discard your draft to fetch the latest solution. Here is your draft: ${t}`}};function vl(e){const[t,n]=Object(c.useState)(""),[r,o]=Object(c.useState)(y.MCQ),l=Object(g.e)();const s=Object(c.useContext)(He),i=bl({formik:l,onSaveCb:function(e){e.solutions[0].commentThreads=s.getThreadArray(),e.commentAuthors=s.authors}}),[u,d]=Object(c.useState)(0);function m(e){n(e),i.setLoadedSourceId(e)}e.authorId!==i.userId&&i.setUserId(e.authorId);const p=l.setFieldValue;function E(e,t){s.loadCommentsData(e.commentThreads,t),function(e){var t,n;let a=(null==(t=l.values)?void 0:null==(n=t.solutions[0])?void 0:n.type)||e;a!==r&&o(a)}(e.type),p(a.PATH_SOLUTION,e)}function h(e,t){if(s.setIsLoading(!1),null==e){let e=Ee(r);e.sourceId=t||"",p(a.PATH_SOLUTION,e)}}return[{isAutoSaving:i.isSaving,isDraft:i.isDraft,hasConflict:i.hasConflict,getDraftStr:i.getDraftStr,getOutdatedDraftErrorMessage:i.getOutdatedDraftErrorMessage,loadedSourceId:t,loadedQuestionType:r,values:l.values,solutionVersion:u},{setNewSourceId:m,load:function(e){l.resetForm(),i.setHasConflict(!1),p("error",""),p(`${a.PATH_SOLUTION}.validationErrors`,[]),m("");const n=l.values.solutions[0],r=void 0!==e?e:t;s.setIsLoading(!0);const o=i.getDraftStr(r);let c;const u=r.indexOf(te)>-1,g=/(http(s?)):\/\//i.test(r);if(null!==o)try{E((c=JSON.parse(o)).solutions[0],c.commentAuthors)}catch(e){return h(),p("error",i.getOutdatedDraftErrorMessage("We were unable to load the solution",o)),Promise.reject(e)}if(g&&!u){const e=new Error(`Cannot find solution for non-textbook solution url. Please make sure you are copying a url that includes ${te}`);return Promise.reject(e)}return Ut.loadExistingSolution(r,b.Textbook).then(e=>{let t=e.data;if("string"==typeof t&&(t=JSON.parse(t)),t.solutionContent){let e=function(e,t){let n=Ee(),a=e.solutionContent;return n.solutionId=e.solutionId.toString(),n.sourceId=fa(e.sourceId,""),n.sourceType=fa(e.sourceType,""),n.version=fa(e.version,0),n.authoredDate=fa(e.authoredDate,""),n.userId=fa(e.userId,""),n.type=a.type.toLowerCase(),n.answers=a.answers,n.hints=a.hints,n.externalLink=fa(a.externalLink,""),n.commentThreads=a.commentThreads||[],n.hasSameExplanationForAllAnswers=a.hasSameExplanationForAllAnswers,n.generalComments=fa(a.generalComments,""),n.isScorable=fa(a.isScorable,!0),n.dok=fa(a.dok,null),n.difficulty=fa(a.difficulty,null),n.containsArt=fa(a.containsArt,!1),n.idType=le.CUSTOM,n.validationErrors=t.validationErrors,n.isPublished=t.isPublished,n.copyright=t.copyright,n.prevCopyright=t.prevCopyright,n.qcStatus=t.qcStatus,n.review=t.review,n}(t,n),a=t.commentAuthors;void 0!==t.commentAuthors&&p("commentAuthors",a),null!=c?c.solutions[0].version<e.version&&i.setHasConflict(!0):E(e,a||[])}else h(c,r);return"sourceId"in t&&r.indexOf(te)>-1?{...n,sourceId:t.sourceId}:n}).catch(e=>{var t,n,a,o;let l=(null==(t=e.response)?void 0:t.status)||(null==(n=e.request)?void 0:n.status)||null,s=(null==(a=e.response)?void 0:null==(o=a.data.error)?void 0:o.message)||"Could not load the solution. Please refresh the page and try again.";return da(l,p,()=>{h(c,r)}),{isAxiosError:!0,status:l,message:s}}).then(e=>{if(m("sourceId"in e&&u?e.sourceId:r),d(e=>e+1),"isAxiosError"in e){if(u)throw new Error("Could not find exercise. Make sure your textbook url is correct");throw e}return e})},changeType:function(e){const t=Me(e,l.values.solutions[0]);p(a.PATH_SOLUTION,t)},setValue:p,save:function(){if(!l.values)throw new Error("Exercise info does not exist");p("error",""),p(`${a.PATH_SOLUTION}.validationErrors`,[]);let[n,r]=function(e,t){let n=Object(El.a)(e),a=[];return Pt(n,[{target:w.SOLUTIONS,callback:(e,t)=>{if(e.type===y.TCQ){const[t,...n]=e.answers;let a=n.map(e=>({...e,explanations:t.explanations}));e.answers=[t,...a]}}},{target:C.HAS_WIDGETS,callback:(e,t)=>{e.widgets=e.widgets.filter(e=>!!e.text||!!e.source)}},{target:w.ANSWERS,callback:(e,t)=>{e.explanations=e.explanations.filter(e=>{return!("explanations"in e&&e.explanations.every(e=>e.widgets.every(e=>!e.text&&!e.source)))})}},{target:C.HAS_TEXT,callback:(e,t)=>{a=[...a,...ha(e.text,t)]}},{target:C.HAS_HINTS,callback:(e,t)=>{e.hints=e.hints.filter(e=>!!e)}},{target:w.HINTS,callback:(e,t)=>{a=[...a,...ha(e,t)]}}]),n.solutions[0].commentThreads=t.getThreadArray(),n.commentAuthors=t.authors,n.solutions[0].validationErrors=[],n.error="",[n,a]}(l.values,s);if(r.length>0){let e=new Ea("Exercise contains KaTeX errors",r);return p(`${a.PATH_SOLUTION}.validationErrors`,e.validationDetails),Promise.reject()}return function(){if(!e.rights.find(e=>e===_.CAN_POST_REVIEW))return!1;const{copyright:t,isPublished:n}=l.values.solutions[0];return t&&n}()?(p("error","Solutions with compliance flags cannot be published. Please reach out to your team lead with questions."),Promise.reject()):Ut.updateSolution("tbq",t,n).then(()=>{const e=function(e){const t=/[A-Za-z0-9+/=]/;return Pt(e,[{target:w.WIDGETS,callback:(e,n)=>{"code"===e.type&&e.source.match(t)&&(e.source=atob(e.source))}}]),e}(n.solutions[0]);return s.loadCommentsData(e.commentThreads,n.commentAuthors),i.setHasConflict(!1),i.discardDraft(),e.version+=1,p(a.PATH_SOLUTION,e),async function(){const{sourceId:e,isPublished:t}=l.values.solutions[0];try{await fetch(Ca,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({isPublished:t,questionCode:e})})}catch(e){ia(e,"An error has occurred while updating the published status. Please try again.",p),ma(e,p)}}(),function(){const{sourceId:e,sourceType:n,copyright:a,prevCopyright:r,review:o,qcStatus:s}=l.values.solutions[0];if(""===t)return;if(void 0===o)throw new Error('"review" is required to save a review.');const i=t,c=""===n?"tbq":n;fetch(va,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...o,copyright:a,prevCopyright:r,sourceId:i,sourceType:c,qcStatus:s})})}(),!0}).catch(e=>{var t,n;let a=null==(t=e.response)?void 0:t.status,r=null==(n=e.response)?void 0:n.data.error;throw da(a,p,()=>{ia(r,"An error has occurred while saving the solution. Please try again.",p),ma(r,p)}),r})},generatePreview:function(){if(!l.values)throw new Error("Exercise info is not defined");p("error",""),Ut.cachePreview(l.values.solutions[0]).then(e=>{window.open("/premium-qa/authoring/preview/"+e+"/","_blank")}).catch(e=>{var t;return da(null==(t=e.response)?void 0:t.status,p,()=>{var t;ia(null==(t=e.response)?void 0:t.data.error,"An error has occurred while attempting to preview. Please try again.",p)})})},discardDraft:function(){i.discardDraft(),window.location.replace(`/premium-qa/authoring/${t}/`)}}]}var wl=n(396);const Cl=e=>{const{onClickCTA:t}=e;return c.createElement(wl.a,{className:"pl-3 py-3",variant:"snackbar",color:"warning",style:{display:"block"}},c.createElement("p",{className:"h6 d-inline-block mr-10"},"An updated version is available."),c.createElement(d,{additionalClasses:"d-inline-block ml-10 px-4",color:"secondary",size:"sm",onClick:t},"Learn more"))},yl=e=>{const{onDiscardAndReload:t,onClose:n}=e;return c.createElement(hn.a,{isOpen:!0,closeOnClickOutside:!0,closeModal:n,className:"pqa-modal"},c.createElement("div",{className:"px-5 py-5 text-center"},c.createElement(xt.a,{icon:"alert-filled",className:"h4 mr-2 d-inline-block text-alternative-warning-yellow"}),c.createElement("p",{className:"h4 mb-2 d-inline-block"},"Load the updated version to continue edit"),c.createElement("p",{className:"mb-3"},"Failure to update might lose the reviewer's comment or other content."),c.createElement(d,{size:"sm",color:"primary",onClick:t},"Discard draft and load")))},Nl=e=>{const{onDiscardAndReload:t}=e,[n,a]=c.useState(!1);return c.createElement(c.Fragment,null,c.createElement(Cl,{onClickCTA:()=>a(!0)}),n&&c.createElement(yl,{onDiscardAndReload:t,onClose:()=>a(!1)}))};n(191);const Sl="/api/v1/textbook-metadata/",xl="/api/v1/textbooks/metadata/",Tl="/api/v1/questions/updateContent/";var Ol=class{static editQuestionContent(e,t,n){return It.a.post(Tl,{questionUpdate:{questionCode:e,question:t,exerciseId:n}})}static getTextbookMetadata(e){return It.a.get(Sl,{params:{questionCode:e}})}static suggestMetadataEdit(e,t){return It.a.post(xl,{questionCode:e,suggestedEdit:t})}},Il=n(24);function Al(e){const{text:t,id:n,onChange:a,placeholder:r}=e,[o,l]=Object(c.useState)(!1);const s=Object(xr.a)(f.defaultConfig,e=>{e.placeholder=r,e.removePlugins=["Comments"],e.toolbar.items=e.toolbar.items.filter(e=>"comment"!==e)});return c.createElement("div",{className:"cheditor-container"},!o&&c.createElement(h,{key:n,editor:f,config:s,data:t,onChange:function(e,t){a(t.getData(),n)},onError:e=>{console.error(e),l(!0)}}),o&&c.createElement("p",{className:"text-alternative-danger-red"},"The editor has crashed. Try reloading the page. If the problem persists report a bug with the question code and this error message."))}function kl(e){const{choice:t,prefix:n,index:a,draggable:r,onChange:o,onChangeFormat:l,onRemove:s}=e;return c.createElement(c.Fragment,null,r&&c.createElement("td",{className:Il.colDraggable},c.createElement(Ya,null)),c.createElement("td",{className:Il.colIdentifier},c.createElement("input",{type:"text",className:"form-control",value:t.identifier,onChange:function(e){const n={...t,identifier:e.currentTarget.value};o(n,a),l()}})),c.createElement("td",null,c.createElement(Al,{id:`${n}-${t.identifier}`,text:t.text,onChange:function(e){const n={...t,text:e};o(n,a)}})),void 0!==t.isCorrect&&c.createElement("td",{className:Il.colIsCorrect},c.createElement("div",{className:"pqa-auth-isCorrect-form form-check"},c.createElement("input",{name:`${n}.isCorrect`,id:`${n}-isCorrect-checkbox`,type:"checkbox",className:"form-check-input",checked:t.isCorrect,onChange:function(e){const n={...t,isCorrect:e.target.checked};o(n,a)}}),c.createElement("label",{className:"form-check-label",htmlFor:`${n}-isCorrect-checkbox`},c.createElement("span",{className:"sr-only"},"Mark answer ",t.identifier," as correct")))),c.createElement("td",{className:Il.colRemove},c.createElement(Kr,{identifier:t.identifier,onRemove:function(){s(a)}})))}function Rl(){return(Rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Pl=e=>{const{onDragEnd:t,children:n}=e;return c.createElement(ta.a,{onDragEnd:function(e,n){if(!e.destination)return;let a=parseInt(e.draggableId.replace(/^\D+/g,""),10);const r=e.destination.index;t(a,r)}},c.createElement(ta.c,{droppableId:"droppable"},(e,t)=>c.createElement("tbody",Rl({},e.droppableProps,{ref:e.innerRef}),n&&c.Children.map(n,(e,t)=>c.createElement(ta.b,{key:e.props.id,draggableId:e.props.id,index:t},(t,n)=>c.createElement("tr",Rl({ref:t.innerRef},t.draggableProps,t.dragHandleProps),c.cloneElement(e)))),e.placeholder)))};const _l={idPrefix:"simplified-choice",idFormat:le.LOWERCASE,choices:[{identifier:"a",text:""},{identifier:"b",text:""},{identifier:"c",text:""},{identifier:"d",text:""}],draggable:!1,onChange:e=>{},onChangeText:(e,t)=>{}};function Dl(e){const{idPrefix:t,idFormat:n,choices:a,draggable:r,onChange:o,onChangeText:l}=function(e,t){let n={...e};return Object.keys(t).forEach(e=>{void 0!==t[e]&&(n[e]=t[e])}),n}(_l,e),[s,i]=Object(c.useState)(n),u=a&&a[0]&&void 0!==a[0].isCorrect;function d(e){let t=kt(a,e,1);t=t.map((e,t)=>({...e,identifier:ue(s,t,e.identifier)})),o(t)}function m(){i(le.CUSTOM)}return c.createElement(c.Fragment,null,c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-4 col-sm-12"},c.createElement(ea,{types:[le.LOWERCASE,le.UPPERCASE,le.NUMERIC,le.CUSTOM],selected:s,onChange:function(e){const t=e.currentTarget.value;if(i(t),t!==le.CUSTOM){const e=a.map((e,n)=>({...e,identifier:ue(t,n,e.identifier)}));o(e)}}}))),c.createElement("table",{className:`table table-borderless table-non-striped w-100 mt-2 ${Il.choicesTable}`},c.createElement("thead",null,c.createElement("tr",null,r&&c.createElement("th",{className:Il.colDraggable},c.createElement("span",{className:"sr-only"},"Move choice")),c.createElement("th",{className:Il.colIdentifier},"Answer Choice"),c.createElement("th",{className:"simplified-choice-header-text"},"Answer"),u&&c.createElement("th",{className:Il.colIsCorrect},"Is correct"),c.createElement("th",{className:Il.colRemove},c.createElement("span",{className:"sr-only"},"Remove choice")))),r&&c.createElement(Pl,{onDragEnd:function(e,t){i(le.CUSTOM);const n=a[e];let r=kt(a,e,1);r=kt(r,t,0,n).map((e,t)=>({...e,identifier:ue(s,t,e.identifier)})),o(r)}},a.map((e,n)=>c.createElement(kl,{key:e.identifier,id:`${t}-drag-${n}`,choice:e,prefix:t,index:n,onChange:l,onChangeFormat:m,onRemove:d,draggable:r}))),!r&&c.createElement("tbody",null,a.map((e,n)=>c.createElement("tr",{key:e.identifier},c.createElement(kl,{choice:e,prefix:t,index:n,onChange:l,onChangeFormat:m,onRemove:d}))))),c.createElement("button",{className:"btn btn-secondary btn-sm px-8 mx-auto d-block",onClick:()=>{!function(){let e=[...a],t={identifier:ue(s,e.length,""),text:""};u&&(t.isCorrect=!1),e.push(t),o(e)}()}},"Add answer option"))}var Ll=n(400);var ql=e=>c.createElement("div",{className:"ck-content"},Ln(e.content,e.parseConfig));function $l(e){const{choice:{identifier:t,text:n}}=e;return c.createElement("div",{className:"d-flex mb-2"},c.createElement("div",{className:"mr-1"},t,".")," ",c.createElement(ql,{content:n}))}const Ml=e=>{const{questionCode:t,questionData:n,type:a,onClosePopup:r,onSaveComplete:o,isLicensed:l,exerciseId:s}=e,[i,u]=Object(c.useState)((null==n?void 0:n.content)||""),[d,m]=Object(c.useState)(null!=n&&n.elements?Fl(n.elements):void 0),p=function(e){return[y.MCQ,y.MS,y.MAT,y.ORD].some(t=>t===e)}(a)&&a!==y.MAT&&l,[E,g]=Object(c.useState)(p?1:0);function h(e){u(t=>e)}return c.createElement(hn.a,{isOpen:!0,closeModal:r,className:"pqa-modal"},c.createElement("div",{className:"px-3 py-2"},c.createElement("h2",{className:"mb-1"},"Edit the question content"),c.createElement("p",{className:"mb-4"},"Edit the question content when it conflicts with the question in a licensed textbook. Correct the content to make it as close as possible to the question in the book."),c.createElement(Ll.d,{selectedIndex:E,onSelect:g},c.createElement(Ll.b,null,c.createElement(Ll.a,null,"Plain text"),p&&c.createElement(Ll.a,null,"MCQ, MS, ORD")),c.createElement(Ll.c,null,0===E&&c.createElement(Al,{id:"question-content-plain",text:i,onChange:h}),c.createElement("div",{className:"mt-4 mb-1 h4"},"Preview"),c.createElement(ql,{content:i,parseConfig:Yl})),p&&c.createElement(Ll.c,null,1===E&&c.createElement(Al,{id:"question-content-mcq",text:i,onChange:h}),c.createElement("div",{className:"mt-3"},c.createElement(Dl,{choices:d,onChange:function(e){m(e)},onChangeText:function(e,t){m(n=>{let a;return n&&(a=kt(n,t,1,e)),a||n})}})),c.createElement("div",{className:"mt-4 mb-1 h4"},"Preview"),c.createElement(ql,{content:i,parseConfig:Yl}),null==d?void 0:d.map(e=>c.createElement($l,{choice:e,key:e.identifier})))),c.createElement("div",{className:"d-flex justify-content-center mt-3"},c.createElement("button",{className:"btn btn-secondary btn-sm mr-7 modalBtn",onClick:r},"Cancel"),c.createElement("button",{className:"btn btn-primary btn-sm modalBtn",type:"submit",onClick:function(){var e;r();const a=d||[];let l=n&&n.elements?[...null==n?void 0:null==(e=n.elements)?void 0:e.filter(e=>!Ul(e)),...Gl(a)]:void 0,c={content:i,elements:l};Ol.editQuestionContent(t,c,s).then(()=>{o({message:"Question content saved!",type:R.SUCCESS},c)}).catch(e=>{const t=ca(e);o({message:t,type:R.ERROR})})}},"Submit"))))};function Ul(e){return e.type===ee&&void 0!==e.identifier}function Fl(e){return null!=e&&e.filter?e.filter(Ul).slice():[]}function Gl(e){return e.map(e=>({...e,group:e.group||"",type:ee}))}const jl=e=>{const{isDraft:t,isSaving:n}=e,a=t?"Draft":"Submitted",r=`label label-${t?"danger":"success"}`,o=n?"Saving...":"All changes saved";return c.createElement("span",null,c.createElement("span",{className:r},a),c.createElement("span",{className:"ml-2"},o))};function Hl(e){const{onSuggest:t,onEdit:n,onDiscard:a,isDiscardEnabled:r,loadedQuestionCode:o}=e,l="suggest",s="edit",i="discard",u=Object(c.useContext)(Ve);let d=[{value:l,text:"Edit question metadata",disabled:!1},{value:i,text:"Discard draft",disabled:!r}];return u.rights.find(e=>e===_.CAN_EDIT_QUESTION)&&d.splice(1,0,{value:s,text:"Edit question content",disabled:!1}),c.createElement(St.a,{onSelect:function(e){switch(null==e?void 0:e.value){case l:t();break;case s:n();break;case i:a()}},screenReaderLabel:"Metadata banner actions",inline:!0},c.createElement(St.d,null,c.createElement(xt.a,{icon:"ellipse-vertical"})),c.createElement(St.c,null,d.map((e,t)=>c.createElement(St.b,{key:`${o}${e.value}`,index:t,item:e,disabled:e.disabled}))))}const Vl=e=>{const{chapterTitle:t,chapterAbbreviation:n,sectionTitle:a,sectionAbbreviation:r,headingTitle:o,headingAbbreviation:l,questionTitle:s,canonicalExerciseCode:i}=e.textbookMetadata;return c.createElement("div",{className:"metadata-titles"},c.createElement("h2",{className:"h6"},n&&c.createElement(c.Fragment,null,"Chapter ",n),n&&t&&": ",t),(a||r)&&c.createElement("h2",{className:"h6"},r&&c.createElement(c.Fragment,null,"Section ",r),r&&a&&": ",a&&a),o&&c.createElement("h2",{className:"h6"},l&&c.createElement(c.Fragment,null,"Heading ",l),l&&o&&": ",o&&o),s&&c.createElement("h2",{className:"h6"},s))},Ql=e=>{const{textbookMetadata:t}=e;return c.createElement("div",{className:"metadata-titles"},!t&&c.createElement("h2",null,"No Metadata available"),t&&c.createElement(Vl,{textbookMetadata:t}),t&&t.canonicalExerciseCode&&c.createElement("p",null,"Solution ID: ",t.canonicalExerciseCode," "))},Wl=e=>{const{textbookMetadata:t,userId:n,authoredDate:a}=e;let r;r=null==t?"No metadata available":`${t.title}, ${t.editionName}, ${t.author}, Page ${t.pageNum}`;let o="No author information is available at this time";return n&&a&&""!=n&&""!=a&&(o="Last authored by user "+n+" on "+a),c.createElement("span",null,r,c.createElement("br",null),c.createElement("em",null,o))};n(388);const Xl=e=>c.createElement("optgroup",{label:e.label},Object.values(e.solutionCategoryTypes).map(e=>c.createElement("option",{key:e.toLocaleUpperCase(),value:e,className:e},`${e.toLocaleUpperCase()} (${N[e]})`))),Bl=e=>{const{path:t,type:n,onChangeType:a}=e;return c.createElement("div",null,c.createElement("select",{className:"form-select pqa-solution-type-select",onChange:e=>{a(e.currentTarget.value)},value:n,name:`${t}.type`},c.createElement(Xl,{label:"Multiple Choice",solutionCategoryTypes:S}),c.createElement(Xl,{label:"Calculation & graphing",solutionCategoryTypes:x}),c.createElement(Xl,{label:"Classify, match & order",solutionCategoryTypes:T}),c.createElement(Xl,{label:"Written & drawing",solutionCategoryTypes:O}),c.createElement("option",{key:y.FF,value:y.FF},"Other")))},Jl=e=>{const{questionCode:t,onClosePopup:n,onSaveComplete:a}=e;return c.createElement(hn.a,{isOpen:!0,closeModal:n,className:"pqa-modal"},c.createElement("div",{className:"px-3 py-2"},c.createElement("h2",null,"Suggest an edit"),c.createElement("p",null,"Please describe the error in the question information or location, e.g. incorrect page number, section title, etc. Please be specific."),c.createElement(g.d,{initialValues:{suggestion:""},onSubmit:e=>{n(),Ol.suggestMetadataEdit(t,e.suggestion).then(()=>{a({message:"Thanks! We will review and fix it.",type:R.SUCCESS})}).catch(e=>{const t=ca(e);a({message:t,type:R.ERROR})})},render:e=>c.createElement(g.c,{className:"form-group mb-0 mt-1"},c.createElement(g.a,{name:"suggestion",className:"form-control",component:"textarea",placeholder:"Enter your suggestion",maxlength:255}),c.createElement("div",{className:"d-flex justify-content-center mt-3"},c.createElement("button",{className:"btn btn-secondary btn-sm mr-7 modalBtn",onClick:n},"Cancel"),c.createElement("button",{className:`btn btn-primary btn-sm modalBtn${""===e.values.suggestion.trim()?" disabled":""}`,type:"submit"},"Submit")))})))},Kl="pqa-edit-metadata-save-prompt",Yl={excludedRules:["crossRefLink"]};function zl(e){var t,n;const{loadedSourceId:r,textbookMetadata:o,onUpdateQuestionContent:l,userId:s,authoredDate:i}=e,[u,d]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[E,g]=Object(c.useState)(void 0),[h,f]=Object(c.useState)(!1),b=Object(c.useContext)(es),v=Object(c.useContext)(ts);let w="panel panel-bordered panel-elevated px-3 pt-3 pb-2 w-100 mt-2 mb-1";const C=b.isAutoSaving,N=b.isDraft(),S=b.values.solutions[0];let x=a.PATH_SOLUTION;const T=S.type||(null==o?void 0:o.questionType)||y.MCQ,O=Fl(null==o?void 0:null==(t=o.question)?void 0:t.elements),I=()=>{g(void 0),f(!1),d(!1),p(!1)},A=e=>{g(e),f(!0)};return""!==r&&(w=`${w} panel-${N?"danger":"success"}`),c.createElement(c.Fragment,null,c.createElement("div",{className:w},""!==r&&c.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.createElement("span",{className:"mb-2"},c.createElement("span",{className:"mr-2"},r),c.createElement(jl,{isDraft:N,isSaving:C})),null!=o&&c.createElement(Hl,{onSuggest:()=>{I(),d(!0)},onEdit:()=>{I(),p(!0)},onDiscard:function(){v.discardDraft()},loadedQuestionCode:r,isDiscardEnabled:!C&&N})),c.createElement(Ql,{textbookMetadata:o}),c.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.createElement(Wl,{textbookMetadata:o,userId:s,authoredDate:i}),c.createElement(Bl,{path:x,type:T,onChangeType:v.changeType})),(null==o?void 0:null==(n=o.question)?void 0:n.content)&&c.createElement("div",{className:"mt-4"},c.createElement(ql,{content:o.question.content,parseConfig:Yl}),O.map(e=>c.createElement($l,{choice:e,key:e.identifier})))),u&&c.createElement(Jl,{questionCode:r,onClosePopup:()=>{d(!1)},onSaveComplete:A}),m&&c.createElement(Ml,{questionCode:r,exerciseId:null==o?void 0:o.exerciseId,questionData:null==o?void 0:o.question,isLicensed:!(null==o||!o.isLicensed),type:T,onClosePopup:()=>{p(!1)},onSaveComplete:(e,t)=>{l(t),A(e)}}),void 0!==E&&c.createElement(ml,{type:E.type,message:E.message,id:Kl,shouldShow:h,onClose:()=>f(!1)}))}function Zl(e){const{loadedSourceId:t,setPrevNextCodes:n,onError:a,userId:r,authoredDate:o}=e,[l,s]=Object(c.useState)(void 0),i=hl(t),u=Object(c.useContext)(ts);const d=c.useCallback((function(e){Ol.getTextbookMetadata(e).then(e=>{const t=e.data;t&&(s(t),n([t.previousQuestionCode,t.nextQuestionCode]))}).catch(e=>{var t;da(null==(t=e.response)?void 0:t.status,u.setValue,()=>{const t=ca(e);a({error:t}),s(void 0)})})}),[a,n,u.setValue]);return Object(c.useEffect)(()=>{""!==t&&t!==i&&t.indexOf(te)<0&&d(t)},[t,i,d]),c.createElement(zl,{loadedSourceId:t,textbookMetadata:l,onUpdateQuestionContent:function(e){l&&s({...l,question:e})},userId:r,authoredDate:o})}const es=c.createContext({}),ts=c.createContext({}),ns=c.createContext({});function as(e){const{user:t,urlQuestionCode:n,loadAppForTests:r=!1}=e,[o,l]=Object(c.useState)(0),[s,i]=Object(c.useState)({error:""}),[u,d]=Object(c.useState)([void 0,void 0]),[E,g]=Object(c.useState)(r),[h,f]=vl(t),[b,v]=Object(c.useState)(!1),w=t.rights.find(e=>e===_.CAN_AUTHOR_SOLUTION);function C(){return i({error:""}),v(!1),f.save().catch(e=>{throw i({error:e.message}),e})}return c.createElement(es.Provider,{value:h},c.createElement(ts.Provider,{value:f},c.createElement(ns.Provider,{value:h.values.solutions[0].type},c.createElement("header",{className:"pqa-author-header bg-neutral-200"},c.createElement("div",{className:"container"},c.createElement("div",{className:"row align-items-center"},c.createElement("div",{className:"col-md-7"},c.createElement(p,{path:a.PATH_SOLUTION,onLoadSolution:function(e){if(v(!1),g(!1),l(o+1),!h.loadedSourceId&&!e)return i({error:"You must enter a question code to load a solution."}),void g(!0);i({error:""}),f.load(e).catch(e=>{e&&i({error:e.message})}).then(()=>{g(!0)})},prevNextCodes:u,onChangeSourceId:e=>{v(!1),f.setNewSourceId(e),g(!0)},urlQuestionCode:n,loadedSourceId:h.loadedSourceId})),E&&w&&c.createElement("div",{className:"col-md-5 pt-2"},c.createElement(m,{onSave:function(){const e=h.values.solutions[0].hints;e&&e.length>=1&&""===e[0]&&(h.values.solutions[0].hints=[]),C().then(()=>v(!0))},onSaveAndCreateNew:function(){C().then(()=>window.location.href="/premium-qa/authoring/")},onPreview:f.generatePreview}))))),c.createElement("div",{className:"container"},E?c.createElement(c.Fragment,null,c.createElement(Zl,{loadedSourceId:h.loadedSourceId,setPrevNextCodes:d,onError:i,userId:h.values.solutions[0].userId,authoredDate:h.values.solutions[0].authoredDate}),h.values.error&&c.createElement("div",{className:"row"},c.createElement("div",{className:"text-alternative-danger-red"},c.createElement("h4",null,h.values.error))),w&&c.createElement(rr,{key:o,errorDesc:null!==h.getDraftStr()?h.getOutdatedDraftErrorMessage("Unable to load UI",h.getDraftStr()):"Unable to load UI"},c.createElement(dl,{solution:h.values.solutions[0],solutionVersion:h.solutionVersion,path:a.PATH_SOLUTION,setFieldValue:f.setValue,errorStrings:pa(h.values.solutions[0].validationErrors,s.error),loadedSourceId:h.loadedSourceId}))):c.createElement("div",{style:{height:"90vh"}})),c.createElement(ml,{message:"Your solution was saved successfully.",id:"pqa-save-success-prompt",type:R.SUCCESS,shouldShow:b,onClose:()=>v(!1)}),h.hasConflict&&c.createElement(Nl,{onDiscardAndReload:()=>f.discardDraft()}))))}let rs=document.getElementById("app"),os=rs&&rs.dataset&&rs.dataset.user?JSON.parse(rs.dataset.user):{},ls=rs&&rs.dataset&&rs.dataset.questionCode?rs.dataset.questionCode:"";u.render(c.createElement(Qe,{user:os},c.createElement(as,{user:os,urlQuestionCode:ls})),rs)},71:function(e,t){e.exports=window.ChEditor},79:function(e,t,n){e.exports={"ck-content":"ck-content",ckContent:"ck-content",image_resized:"image_resized",imageResized:"image_resized","image-style-align-left":"image-style-align-left",imageStyleAlignLeft:"image-style-align-left","image-style-align-right":"image-style-align-right",imageStyleAlignRight:"image-style-align-right",ck:"ck","ck-placeholder":"ck-placeholder",ckPlaceholder:"ck-placeholder","ck-editor__editable_inline":"ck-editor__editable_inline",ckEditorEditableInline:"ck-editor__editable_inline",table:"table","katex-html":"katex-html",katexHtml:"katex-html",katex:"katex",mfrac:"mfrac","frac-line":"frac-line",fracLine:"frac-line",overline:"overline","overline-line":"overline-line",overlineLine:"overline-line"}}});